<?xml version="1.0" encoding="utf-8" ?>
<Patch>

  <!-- ========== Patch - OkraDonkey.NoEdgeFade ========== -->
  <!-- Targeting Core\Defs\TerrainDefs\Terrain_Floors.xml -->
  <!-- Targeting Core\Defs\TerrainDefs\Terrain_Floors_Burned.xml -->
  <!-- Targeting Core\Defs\TerrainDefs\Terrain_Floors_StoneTile.xml -->
  <!-- Targeting Core\Defs\TerrainDefs\Terrain_Natural.xml -->
  <!-- Targeting Core\Defs\TerrainDefs\Terrain_Road.xml -->
  <!-- Targeting Core\Defs\TerrainDefs\Terrain_Water.xml -->

  <Operation Class="PatchOperationSequence">
    <success>Always</success>
    <operations>

      <!-- change renderPrecendence: generally, render man-made floors above natural terrains -->
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "BurnedWoodPlankFloor"]/renderPrecedence</xpath>    <value><renderPrecedence>391</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "WoodPlankFloor"]/renderPrecedence</xpath>          <value><renderPrecedence>390</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "SterileTile"]/renderPrecedence</xpath>             <value><renderPrecedence>383</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "GoldTile"]/renderPrecedence</xpath>                <value><renderPrecedence>382</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "SilverTile"]/renderPrecedence</xpath>              <value><renderPrecedence>381</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "MetalTile"]/renderPrecedence</xpath>               <value><renderPrecedence>380</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "PavedTile"]/renderPrecedence</xpath>               <value><renderPrecedence>370</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[@Name = "FlagstoneBase"]/renderPrecedence</xpath>             <value><renderPrecedence>360</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[@Name = "TileStoneBase"]/renderPrecedence</xpath>             <value><renderPrecedence>360</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Concrete"]/renderPrecedence</xpath>                <value><renderPrecedence>355</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "BurnedCarpet"]/renderPrecedence</xpath>            <value><renderPrecedence>340</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "CarpetRed"]/renderPrecedence</xpath>               <value><renderPrecedence>339</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "CarpetGreen"]/renderPrecedence</xpath>             <value><renderPrecedence>338</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "CarpetBlue"]/renderPrecedence</xpath>              <value><renderPrecedence>337</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "CarpetCream"]/renderPrecedence</xpath>             <value><renderPrecedence>336</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "CarpetDark"]/renderPrecedence</xpath>              <value><renderPrecedence>335</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "WaterMovingChestDeep"]/renderPrecedence</xpath>    <value><renderPrecedence>299</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "WaterMovingShallow"]/renderPrecedence</xpath>      <value><renderPrecedence>298</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "WaterOceanDeep"]/renderPrecedence</xpath>          <value><renderPrecedence>297</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "WaterOceanShallow"]/renderPrecedence</xpath>       <value><renderPrecedence>296</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "WaterDeep"]/renderPrecedence</xpath>               <value><renderPrecedence>295</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "WaterShallow"]/renderPrecedence</xpath>            <value><renderPrecedence>294</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "BrokenAsphalt"]/renderPrecedence</xpath>           <value><renderPrecedence>270</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "PackedDirt"]/renderPrecedence</xpath>              <value><renderPrecedence>260</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "SoftSand"]/renderPrecedence</xpath>                <value><renderPrecedence>252</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Ice"]/renderPrecedence</xpath>                     <value><renderPrecedence>250</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Sand"]/renderPrecedence</xpath>                    <value><renderPrecedence>250</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Soil"]/renderPrecedence</xpath>                    <value><renderPrecedence>240</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "MarshyTerrain"]/renderPrecedence</xpath>           <value><renderPrecedence>237</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "SoilRich"]/renderPrecedence</xpath>                <value><renderPrecedence>235</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Mud"]/renderPrecedence</xpath>                     <value><renderPrecedence>230</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Marsh"]/renderPrecedence</xpath>                   <value><renderPrecedence>225</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Gravel"]/renderPrecedence</xpath>                  <value><renderPrecedence>220</renderPrecedence></value></li>
      <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "MossyTerrain"]/renderPrecedence</xpath>            <value><renderPrecedence>215</renderPrecedence></value></li>

      <!-- remove edgeType node to set to the default Hard edgeType -->
      <!-- Leave Water and Marsh tiles alone or they'll look funky -->
      <li Class="PatchOperationRemove">
        <xpath>Defs/TerrainDef[
          defName = "BurnedWoodPlankFloor" or
          defName = "BurnedCarpet" or
          defName = "BrokenAsphalt" or
          defName = "PackedDirt" or
          defName = "SoftSand" or
          defName = "Ice" or
          defName = "Sand" or
          defName = "Soil" or
          defName = "MarshyTerrain" or
          defName = "SoilRich" or
          defName = "Mud" or
          defName = "Gravel" or
          defName = "MossyTerrain"
          ]/edgeType
        </xpath>
      </li>

    </operations>
  </Operation>

  <!-- ========== Patch for Royalty ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Royalty</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[@Name = "FineTileStoneBase"]/renderPrecedence</xpath>         <value><renderPrecedence>360</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "CarpetFineBurgundy"]/renderPrecedence</xpath>      <value><renderPrecedence>340</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "CarpetFineIndigo"]/renderPrecedence</xpath>        <value><renderPrecedence>339</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "CarpetFineWhite"]/renderPrecedence</xpath>         <value><renderPrecedence>338</renderPrecedence></value></li>

      </operations>
    </match>
  </Operation>

  <!-- ========== Patch for the original [RF] Fertile Fields [1.0] ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>[RF] Fertile Fields [1.0]</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "BrickFloor"]/renderPrecedence</xpath>              <value><renderPrecedence>355</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "HBBrickFloor"]/renderPrecedence</xpath>            <value><renderPrecedence>355</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Topsoil"]/renderPrecedence</xpath>                 <value><renderPrecedence>240</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "DirtFert"]/renderPrecedence</xpath>                <value><renderPrecedence>235</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "SoilTilled"]/renderPrecedence</xpath>              <value><renderPrecedence>233</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "RockySoil"]/renderPrecedence</xpath>               <value><renderPrecedence>220</renderPrecedence></value></li>

        <li Class="PatchOperationRemove">
          <xpath>Defs/TerrainDef[
            defName = "RockySoil" or
            defName = "Topsoil" or
            defName = "DirtFert" or
            defName = "SoilTilled"
            ]/edgeType
          </xpath>
        </li>

      </operations>
    </match>
  </Operation>

  <!-- ========== Patch for jamaicancastle.RF.fertilefields ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Fertile Fields [1.1]</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "BrickFloor"]/renderPrecedence</xpath>              <value><renderPrecedence>355</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "HBBrickFloor"]/renderPrecedence</xpath>            <value><renderPrecedence>355</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Topsoil"]/renderPrecedence</xpath>                 <value><renderPrecedence>240</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "DirtFert"]/renderPrecedence</xpath>                <value><renderPrecedence>235</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "SoilTilled"]/renderPrecedence</xpath>              <value><renderPrecedence>233</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "TrenchDeep"]/renderPrecedence</xpath>              <value><renderPrecedence>228</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "TrenchMuddy"]/renderPrecedence</xpath>             <value><renderPrecedence>226</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "TrenchShallow"]/renderPrecedence</xpath>           <value><renderPrecedence>225</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "RockySoil"]/renderPrecedence</xpath>               <value><renderPrecedence>220</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "SoilWorn"]/renderPrecedence</xpath>                <value><renderPrecedence>200</renderPrecedence></value></li>

        <li Class="PatchOperationRemove">
          <xpath>Defs/TerrainDef[
            defName = "RockySoil" or
            defName = "TrenchShallow" or
            defName = "TrenchMuddy" or
            defName = "TrenchDeep" or
            defName = "Topsoil" or
            defName = "DirtFert" or
            defName = "SoilTilled" or
            defName = "SoilWorn"
            ]/edgeType
          </xpath>
        </li>

      </operations>
    </match>
  </Operation>

  <!-- ========== Patch for Telkir.TMods.MoreFloors ========== -->
  <!-- Includes patch of abstract FloorBaseStone for floors added by MoreFloors patches -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>[T] MoreFloors</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationAdd"><xpath>Defs/TerrainDef[@Name = "TFloorBaseGemstone"]</xpath>                           <value><renderPrecedence>384</renderPrecedence></value></li>
        <li Class="PatchOperationAdd"><xpath>Defs/TerrainDef[@Name = "FloorBaseStone"]</xpath>                               <value><renderPrecedence>368</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[@Name = "TFloorBaseCarpet"]/renderPrecedence</xpath>        <value><renderPrecedence>334</renderPrecedence></value></li>

        <li Class="PatchOperationRemove"><xpath>Defs/TerrainDef[defName = "FloorStoneMosaicSandstone"]/renderPrecedence</xpath></li>

        <li Class="PatchOperationAdd"><xpath>Defs/TerrainDef[defName = "FloorPlasteel"]</xpath>                              <value><renderPrecedence>385</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "FloorWoodRustic"]/renderPrecedence</xpath>       <value><renderPrecedence>350</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "FloorWoodWide"]/renderPrecedence</xpath>         <value><renderPrecedence>349</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "FloorWoodLight"]/renderPrecedence</xpath>        <value><renderPrecedence>348</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "FloorWoodMosaic"]/renderPrecedence</xpath>       <value><renderPrecedence>347</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "FloorWoodVertical"]/renderPrecedence</xpath>     <value><renderPrecedence>346</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "FloorWoodBarn"]/renderPrecedence</xpath>         <value><renderPrecedence>345</renderPrecedence></value></li>
        <li Class="PatchOperationAdd"><xpath>Defs/TerrainDef[defName = "BurnedStrawFloor"]</xpath>                           <value><renderPrecedence>255</renderPrecedence></value></li>
        <li Class="PatchOperationAdd"><xpath>Defs/TerrainDef[defName = "FloorStraw"]</xpath>                                 <value><renderPrecedence>254</renderPrecedence></value></li>

        <li Class="PatchOperationRemove">
          <xpath>Defs/TerrainDef[
            defName = "BurnedStrawFloor" or
            defName = "FloorStraw" or
            defName = "FloorWoodBarn"
            ]/edgeType
          </xpath>
        </li>

      </operations>
    </match>
  </Operation>

    <!-- ========== Patch for RadZerp.naturalPaths ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Natural Paths</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[@Name = "pathBase"]/renderPrecedence</xpath>                  <value><renderPrecedence>250</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "gravelPath"]/renderPrecedence</xpath>              <value><renderPrecedence>251</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "gravelPathLight"]/renderPrecedence</xpath>         <value><renderPrecedence>251</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "sandPath"]/renderPrecedence</xpath>                <value><renderPrecedence>249</renderPrecedence></value></li>

        <li Class="PatchOperationRemove">
          <xpath>Defs/TerrainDef[
            @Name = "pathBase" or
            defName = "dirtPathLight" or
            defName = "gravelPath" or
            defName = "gravelPathLight" or
            defName = "sandPath"
            ]/edgeType
          </xpath>
        </li>

      </operations>
    </match>
  </Operation>

    <!-- ========== Patch for fluffy.stuffedfloors ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Stuffed Floors</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationReplace">
          <xpath>Defs/StuffedFloors.FloorTypeDef[@Name = "StuffedFloorsBase"]/renderPrecedence</xpath>                       <value><renderPrecedence>301</renderPrecedence></value>
        </li>

      </operations>
    </match>
  </Operation>

    <!-- ========== Patch for FrozenSnowFox.CarpetsoftheRainbow ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>[FSF] Carpets of the Rainbow</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationReplace"><xpath>/Defs/TerrainDef[@ParentName = "FSFCarpetBase"]/renderPrecedence</xpath>      <value><renderPrecedence>300</renderPrecedence></value></li>

      </operations>
    </match>
  </Operation>

  <!-- ========== Patch for essecoisa.FlooredYASTO ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Floored - Yellow and Striped Tiles Only [1.0+]</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "StripedTile"]/renderPrecedence</xpath>             <value><renderPrecedence>380</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "YellowTile"]/renderPrecedence</xpath>              <value><renderPrecedence>380</renderPrecedence></value></li>

      </operations>
    </match>
  </Operation>

  <!-- ========== Patch for essecoisa.Floored ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Floored [1.0+]</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "StripedTile"]/renderPrecedence</xpath>             <value><renderPrecedence>380</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "YellowTile"]/renderPrecedence</xpath>              <value><renderPrecedence>380</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "PlasteelTile"]/renderPrecedence</xpath>            <value><renderPrecedence>380</renderPrecedence></value></li>

      </operations>
    </match>
  </Operation>

  <!-- ========== Patch for essecoisa.CautionTiles ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Caution Tiles [1.0+]</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "YellowStripedTile" or
          defName = "RedStripedTile" or
          defName = "BlueStripedTile" or
          defName = "GreenStripedTile" or
          defName = "PurpleTileStripedTile" or
          defName = "YellowStripedTileNE" or
          defName = "RedStripedTileNE" or
          defName = "BlueStripedTileNE" or
          defName = "GreenStripedTileNE" or
          defName = "PurpleTileStripedTileNE" or
          defName = "YellowStripedTileSE" or
          defName = "RedStripedTileSE" or
          defName = "BlueStripedTileSE" or
          defName = "GreenStripedTileSE" or
          defName = "PurpleTileStripedTileSE" or
          defName = "YellowStripedTileSW" or
          defName = "RedStripedTileSW" or
          defName = "BlueStripedTileSW" or
          defName = "GreenStripedTileSW" or
          defName = "PurpleTileStripedTileSW" or
          defName = "YellowTile" or
          defName = "RedTile" or
          defName = "BlueTile" or
          defName = "GreenTile" or
          defName = "PurpleTile"
          ]/renderPrecedence</xpath><value><renderPrecedence>380</renderPrecedence></value></li>

      </operations>
    </match>
  </Operation>

  <!-- ========== Patch for spdskatr.projectrimfactory ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Project RimFactory Revived</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "StripedTile"]/renderPrecedence</xpath>             <value><renderPrecedence>380</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "StripedTileLeft"]/renderPrecedence</xpath>         <value><renderPrecedence>380</renderPrecedence></value></li>

      </operations>
    </match>
  </Operation>

  <!-- ========== Patch for dismarzero.VGP.VGPGardenTools ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>VGP Garden Tools</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "VG_PlaceSoil" or
          defName = "VG_ReclaimSoil" or
          defName = "VG_ReclaimMud" or
          defName = "VG_ReclaimWater" or
          defName = "VG_GardenSoil" or
          defName = "VG_PlowSoil"
          ]/renderPrecedence</xpath><value><renderPrecedence>235</renderPrecedence></value></li>

        <li Class="PatchOperationRemove">
          <xpath>Defs/TerrainDef[
          defName = "VG_PlaceSoil" or
          defName = "VG_ReclaimSoil" or
          defName = "VG_ReclaimMud" or
          defName = "VG_ReclaimWater" or
          defName = "VG_GardenSoil" or
          defName = "VG_PlowSoil"
          ]/edgeType
          </xpath>
        </li>

      </operations>
    </match>
  </Operation>

  <!-- ========== Patch for zilla.tilledsoil ========== -->
  <!-- ========== May also affect other Tilled Soil mods ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Tilled Soil</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "TilledSoil"]/renderPrecedence</xpath>             <value><renderPrecedence>235</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Dirt"]/renderPrecedence</xpath>                   <value><renderPrecedence>235</renderPrecedence></value></li>

        <li Class="PatchOperationRemove">
          <xpath>Defs/TerrainDef[
            @Name = "TilledSoil" or
            defName = "Dirt"
            ]/edgeType
          </xpath>
        </li>

      </operations>
    </match>
  </Operation>

  <!-- ========== Patch for Dubwise.Rimefeller ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Rimefeller</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[@Name = "RimefellerLinoBase"]/renderPrecedence</xpath>        <value><renderPrecedence>360</renderPrecedence></value></li>

        <li Class="PatchOperationAdd"><xpath>Defs/TerrainDef[defName = "Lino_Red"]</xpath>                                     <value><renderPrecedence>340</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Lino_Green"]/renderPrecedence</xpath>              <value><renderPrecedence>339</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Lino_Blue"]/renderPrecedence</xpath>               <value><renderPrecedence>338</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Lino_White"]/renderPrecedence</xpath>              <value><renderPrecedence>337</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Lino_Dark"]/renderPrecedence</xpath>               <value><renderPrecedence>336</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Lino_Gold"]/renderPrecedence</xpath>               <value><renderPrecedence>335</renderPrecedence></value></li>

        <li Class="PatchOperationAdd"><xpath>Defs/TerrainDef[defName = "LinoTile_Red"]</xpath>                                 <value><renderPrecedence>340</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "LinoTile_Green"]/renderPrecedence</xpath>          <value><renderPrecedence>339</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "LinoTile_Blue"]/renderPrecedence</xpath>           <value><renderPrecedence>338</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "LinoTile_White"]/renderPrecedence</xpath>          <value><renderPrecedence>337</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "LinoTile_Dark"]/renderPrecedence</xpath>           <value><renderPrecedence>336</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "LinoTile_Gold"]/renderPrecedence</xpath>           <value><renderPrecedence>335</renderPrecedence></value></li>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Wood_ParquetHerring"]/renderPrecedence</xpath>     <value><renderPrecedence>390</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Wood_ParquetVersailles"]/renderPrecedence</xpath>  <value><renderPrecedence>390</renderPrecedence></value></li>

        <li Class="PatchOperationAdd"><xpath>Defs/TerrainDef[defName = "Lino_MosaicRed"]</xpath>                               <value><renderPrecedence>340</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Lino_MosaicGreen"]/renderPrecedence</xpath>        <value><renderPrecedence>339</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Lino_MosaicBlue"]/renderPrecedence</xpath>         <value><renderPrecedence>338</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Lino_MosaicCream"]/renderPrecedence</xpath>        <value><renderPrecedence>337</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Lino_MosaicDark"]/renderPrecedence</xpath>         <value><renderPrecedence>336</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "Lino_MosaicGold"]/renderPrecedence</xpath>         <value><renderPrecedence>335</renderPrecedence></value></li>

      </operations>
    </match>
  </Operation>

  <!-- ========== Patch for Wemd.ExpandedFloors ========== -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>[WD] Expanded Floors</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>

        <!-- Burned -->
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "WDBurnedWidePlanks" or
          defName = "WDBurnedCheckWoodenFloor" or
          defName = "WDBurnedParquet" or
          defName = "WDBurnedMosaicWoodenFloor" or
          defName = "WDBurnedPlywoodFloor" or
          defName = "WDBurnedStrawFloor"
          ]/renderPrecedence</xpath><value><renderPrecedence>391</renderPrecedence></value></li>

        <!-- Carpets -->
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "CarpetCream" or
          defName = "WDCarpetYellow" or
          defName = "WDCarpetOrange" or
          defName = "WDCarpetBrown" or
          defName = "WDCarpetPink" or
          defName = "CarpetRed" or
          defName = "WDCarpetIndigo" or
          defName = "WDCarpetPurple" or
          defName = "CarpetBlue" or
          defName = "WDCarpetSkyBlue" or
          defName = "WDCarpetLightGreen" or
          defName = "CarpetGreen" or
          defName = "WDCarpetWhite" or
          defName = "WDCarpetGrey" or
          defName = "CarpetDark" or
          defName = "WDCarpetBlack"
          ]/renderPrecedence</xpath><value><renderPrecedence>339</renderPrecedence></value></li>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "WDCarpetCreamCheckSimple" or
          defName = "WDkCarpetYellowChecSimple" or
          defName = "WDCarpetOrangeCheckSimple" or
          defName = "WDCarpetBrownCheckSimple" or
          defName = "WDCarpetPinkCheckSimple" or
          defName = "WDCarpetRedCheckSimple" or
          defName = "WDCarpetIndigoCheckSimple" or
          defName = "WDCarpetPurpleCheckSimple" or
          defName = "WDCarpetBlueCheckSimple" or
          defName = "WDCarpetSkyBlueCheckSimple" or
          defName = "WDCarpetLightGreenCheckSimple" or
          defName = "WDCarpetGreenCheckSimple" or
          defName = "WDCarpetWhiteCheckSimple" or
          defName = "WDCarpetGreyCheckSimple" or
          defName = "WDCarpetDarkCheckSimple" or
          defName = "WDCarpetBlackCheckSimple"
          ]/renderPrecedence</xpath><value><renderPrecedence>339</renderPrecedence></value></li>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "WDCheckCarpetCream" or
          defName = "WDCheckCarpetYellow" or
          defName = "WDCheckCarpetOrange" or
          defName = "WDCheckCarpetBrown" or
          defName = "WDCheckCarpetPink" or
          defName = "WDCheckCarpetRed" or
          defName = "WDCheckCarpetIndigo" or
          defName = "WDCheckCarpetPurple" or
          defName = "WDCheckCarpetBlue" or
          defName = "WDCheckCarpetSkyBlue" or
          defName = "WDCheckCarpetLightGreen" or
          defName = "WDCheckCarpetGreen" or
          defName = "WDCheckCarpetWhite" or
          defName = "WDCheckCarpetGrey" or
          defName = "WDCheckCarpetDark" or
          defName = "WDCheckCarpetBlack"
          ]/renderPrecedence</xpath><value><renderPrecedence>339</renderPrecedence></value></li>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "WDCarpetFineCream" or
          defName = "WDCarpetFineYellow" or
          defName = "WDCarpetFineOrange" or
          defName = "WDCarpetFineBrown" or
          defName = "WDCarpetFinePink" or
          defName = "CarpetFineBurgundy" or
          defName = "CarpetFineIndigo" or
          defName = "WDCarpetFinePurple" or
          defName = "WDCarpetFineBlue" or
          defName = "WDCarpetFineSkyBlue" or
          defName = "WDCarpetFineLightGreen" or
          defName = "WDCarpetFineGreen" or
          defName = "CarpetFineWhite" or
          defName = "WDCarpetFineGrey" or
          defName = "WDCarpetFineDark" or
          defName = "WDCarpetFineBlack"
          ]/renderPrecedence</xpath><value><renderPrecedence>339</renderPrecedence></value></li>

        <!-- Jade -->
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[@Name = "WDJadeFloorBase"]/renderPrecedence</xpath>        <value><renderPrecedence>360</renderPrecedence></value></li>

        <!-- Metal -->
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "Concrete" or
          defName = "PavedTile" or
          defName = "WDMetalSheets" or
          defName = "WDStripedMetalTile" or
          defName = "WDPatternedMetalTile"
          ]/renderPrecedence</xpath><value><renderPrecedence>370</renderPrecedence></value></li>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "MetalTile" or
          defName = "WDMetalCheckTile" or
          defName = "WDHexMetalFloor"
          ]/renderPrecedence</xpath><value><renderPrecedence>380</renderPrecedence></value></li>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "SilverTile" or
          defName = "WDSilverCheckTile" or
          defName = "WDSilverTileHex"
          ]/renderPrecedence</xpath><value><renderPrecedence>381</renderPrecedence></value></li>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "GoldTile" or
          defName = "WDGoldCheckTile" or
          defName = "WDGodlTileHex"
          ]/renderPrecedence</xpath><value><renderPrecedence>382</renderPrecedence></value></li>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "WDPlasteelTile" or
          defName = "WDPlasteelCheckTile" or
          defName = "WDPlasteelTileHex"
          ]/renderPrecedence</xpath><value><renderPrecedence>384</renderPrecedence></value></li>

        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "SterileTile" or
          defName = "WDCheckSterileTile" or
          defName = "WDHexSterileTile"
          ]/renderPrecedence</xpath><value><renderPrecedence>383</renderPrecedence></value></li>

        <!-- Misc -->
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "WDStrawFloor"]/renderPrecedence</xpath>                <value><renderPrecedence>254</renderPrecedence></value></li>
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[defName = "WDPackedDirtFloor"]/renderPrecedence</xpath>           <value><renderPrecedence>260</renderPrecedence></value></li>

        <!-- Stone -->
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          @Name = "WDRoughStoneTileBase" or
          @Name = "WDStoneTileBase" or
          @Name = "WDCheckStoneTileBase" or
          @Name = "WDCheckStoneFloorBase" or
          @Name = "WDMosaicStoneFloorBase" or
          @Name = "WDPolishedStoneFloorBase" or
          @Name = "WDStonePlateFloorBase"
          ]/renderPrecedence</xpath><value><renderPrecedence>360</renderPrecedence></value></li>

        <!-- Wood -->
        <li Class="PatchOperationReplace"><xpath>Defs/TerrainDef[
          defName = "WDPlywoodFloor" or
          defName = "WoodPlankFloor" or
          defName = "WDWidePlanksFloor" or
          defName = "WDCheckWoodenFloor" or
          defName = "WDParquet" or
          defName = "WDMosaicWoodenFloor"
          ]/renderPrecedence</xpath><value><renderPrecedence>390</renderPrecedence></value></li>

      <!-- EdgeTypes -->
      <li Class="PatchOperationRemove">
        <xpath>Defs/TerrainDef[
          defName = "WDBurnedWidePlanks" or
          defName = "WDBurnedCheckWoodenFloor" or
          defName = "WDBurnedParquet" or
          defName = "WDBurnedMosaicWoodenFloor" or
          defName = "WDBurnedPlywoodFloor" or
          defName = "WDBurnedStrawFloor" or
          defName = "WDStrawFloor" or
          defName = "WDPackedDirtFloor"
          ]/edgeType
        </xpath>
      </li>

      </operations>
    </match>
  </Operation>

</Patch>
