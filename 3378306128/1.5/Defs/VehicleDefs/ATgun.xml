<?xml version="1.0" encoding="utf-8"?>

<Defs>
	<Vehicles.VehicleBuildDef ParentName="RT_BaseVehicleBuild">
		<defName>RT_TestAT_Blueprint</defName>
		<label>Anti Tank Gun</label>
		<description>A testing manned AT gun, can be towed by vehicles.</description>
		<graphicData>
			<texPath>Vehicles/AT/vehicle</texPath>
			<graphicClass>Graphic_Multi</graphicClass>
			<drawSize>4</drawSize>
		</graphicData>
		<size>(3,3)</size>
		<statBases>
			<MaxHitPoints>500</MaxHitPoints>
			<WorkToBuild>2000</WorkToBuild>
			<Flammability>0.05</Flammability>
		</statBases>
		<researchPrerequisites>
			<li>GunTurrets</li>
		</researchPrerequisites>
		<constructionSkillPrerequisite>6</constructionSkillPrerequisite>	
		<costList>
			<ComponentIndustrial>8</ComponentIndustrial>
			<Steel>120</Steel>
		</costList>
		<thingToSpawn>RT_TestAT</thingToSpawn>
	</Vehicles.VehicleBuildDef>

	<Vehicles.VehicleDef ParentName="RT_BaseVehicle">
		<defName>RT_TestAT</defName>
		<label>Anti Tank Gun</label>
		<thingClass>Motorization.VehiclePawn_Trailer</thingClass>
		<description>A testing manned AT gun, can be towed by vehicles.</description>

		<graphicData>
			<texPath>Vehicles/AT/vehicle</texPath>
			<graphicClass>Vehicles.Graphic_Vehicle</graphicClass>
			<shaderType>CutoutComplexPattern</shaderType>
			<drawSize>4</drawSize>
			<layer>0</layer>
		</graphicData>

		<fillPercent>0.75</fillPercent>

		<nameable>false</nameable>
		<buildDef>RT_TestAT_Blueprint</buildDef>

		<size>(3,3)</size>
		<uiIconScale>1.25</uiIconScale>

		<vehicleMovementPermissions>DriverNeeded</vehicleMovementPermissions>
		<vehicleCategory>Transport</vehicleCategory>
		<techLevel>Industrial</techLevel>
		<vehicleType>Land</vehicleType>

		<statBases>
			<ArmorRating_Blunt>0.4</ArmorRating_Blunt>
			<ArmorRating_Sharp>0.6</ArmorRating_Sharp>
			<Flammability>0</Flammability>
			<MarketValue>875</MarketValue>
		</statBases>

		<vehicleStats>
			<Mass>100</Mass>
			<MoveSpeed>1</MoveSpeed>
			<CargoCapacity>100</CargoCapacity>
			<RepairRate>1</RepairRate>
		</vehicleStats>

		<race>
			<baseBodySize>2</baseBodySize>
		</race>

		<properties>
			<diagonalRotation>true</diagonalRotation>
			<worldSpeedMultiplier>1.8</worldSpeedMultiplier>
			<winterSpeedMultiplier>5</winterSpeedMultiplier>
			<manhunterTargetsVehicle>true</manhunterTargetsVehicle>
			<offRoadMultiplier>1.5</offRoadMultiplier>

			<customSnowCategoryTicks>
				<Dusting>4</Dusting>
				<Thin>8</Thin>
				<Medium>16</Medium>
				<Thick>24</Thick>
			</customSnowCategoryTicks>

			<roles>
				<li>
					<key>gunnerA</key>
					<label>gunnerA</label>
					<slots>1</slots>
					<slotsToOperate>1</slotsToOperate>
					<exposed>true</exposed>

					<hitbox>
						<side>Body</side>
					</hitbox>

					<handlingTypes>
						<li>Movement</li>
						<li>Turret</li>
					</handlingTypes>

					<turretIds>
						<li>AT Gun</li>
					</turretIds>

					<pawnRenderer>
						<layer>1</layer>
						<layerNorth>1</layerNorth>
						<layerSouth>0</layerSouth>
						<layerEast>1</layerEast>
						<angleNorth>0</angleNorth>
						<angleEast>0</angleEast>
						<angleNorthEast>0</angleNorthEast>
						<angleSouthEast>0</angleSouthEast>
						<drawOffsetNorth>(0.5,-0.5,-0.5)</drawOffsetNorth>
						<drawOffsetSouth>(-0.5,1,0.6)</drawOffsetSouth>
						<drawOffsetEast>(-1,-1.5,-0.5)</drawOffsetEast>
					</pawnRenderer>
				</li>
				<li>
					<key>gunnerB</key>
					<label>gunnerB</label>
					<slots>1</slots>
					<slotsToOperate>1</slotsToOperate>
					<exposed>true</exposed>

					<hitbox>
						<side>Body</side>
					</hitbox>

					<handlingTypes>
						<li>Movement</li>
						<li>Turret</li>
					</handlingTypes>

					<turretIds>
						<li>AT Gun</li>
					</turretIds>

					<pawnRenderer>
						<layer>0.9</layer>
						<layerNorth>1</layerNorth>
						<layerSouth>0</layerSouth>
						<layerEast>0.8</layerEast>
						<angleNorth>0</angleNorth>
						<angleEast>0</angleEast>
						<angleNorthEast>0</angleNorthEast>
						<angleSouthEast>0</angleSouthEast>
						<drawOffsetNorth>(-0.5,-0.5,-0.5)</drawOffsetNorth>
						<drawOffsetSouth>(0.5,1,0.6)</drawOffsetSouth>
						<drawOffsetEast>(-1,1.5,0.5)</drawOffsetEast>
					</pawnRenderer>
				</li>
			</roles>
		</properties>
		<components>
			<li>
				<key>LeftWheel</key>
				<label>Left Wheel</label>
				<health>20</health>
				<depth>External</depth>
				<armor>
					<ArmorRating_Blunt>0</ArmorRating_Blunt>
					<ArmorRating_Sharp>0</ArmorRating_Sharp>
				</armor>
				<hitbox>
					<side>Left</side>
				</hitbox>
				<tags>
					<li>Wheel</li>
				</tags>
				<categories>
					<li>MoveSpeed</li>
				</categories>
			</li>
			<li>
				<key>RightWheel</key>
				<label>Right Wheel</label>
				<health>20</health>
				<depth>External</depth>
				<armor>
					<ArmorRating_Blunt>0</ArmorRating_Blunt>
					<ArmorRating_Sharp>0</ArmorRating_Sharp>
				</armor>
				<hitbox>
					<side>Right</side>
				</hitbox>
				<tags>
					<li>Wheel</li>
				</tags>
				<categories>
					<li>MoveSpeed</li>
				</categories>
			</li>
			<li>
				<key>GunShield</key>
				<label>Gun Shield</label>
				<health>200</health>
				<depth>External</depth>
				<hitWeight>8</hitWeight>
				<armor>
					<ArmorRating_Blunt>0.4</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.75</ArmorRating_Sharp>
				</armor>
			</li>
			<li>
				<key>BreechBlock</key>
				<label>Breech Block</label>
				<health>40</health>
				<depth>Internal</depth>
				<hitbox>
					<side>Back</side>
				</hitbox>
			</li>
			<li>
				<key>LeftGunRack</key>
				<label>Left GunRack</label>
				<health>50</health>
				<depth>External</depth>
				<hitbox>
					<side>Left</side>
				</hitbox>
			</li>
			<li>
				<key>RightGunRack</key>
				<label>Right GunRack</label>
				<health>50</health>
				<depth>External</depth>
				<hitbox>
					<side>Right</side>
				</hitbox>
			</li>
		</components>
		<comps>
			<li Class="Motorization.CompProperties_DeployToggleTexture">
				<defaultRetexture>RT_AT</defaultRetexture>
			</li>
			<li Class="Motorization.CompProperties_TrailerMount">
				<flipWhenTrailer>true</flipWhenTrailer>
				<rotationPivot>
					<li>(0,0,-1.95)</li><!--north-->
					<li>(-1.95,0,0)</li><!--east-->
					<li>(0,0,1.95)</li><!--south-->
					<li>(1.95,0,0)</li><!--west-->
					<li>(-1.4,0,-1.4)</li><!--northEast-->
					<li>(-1.4,0,1.4)</li><!--southEast-->
					<li>(1.4,0,1.4)</li><!--southWest-->
					<li>(1.4,0,-1.4)</li><!--northWest-->
				</rotationPivot>
			</li>
			<li Class="Vehicles.CompProperties_VehicleTurrets">
				<deployTime>4</deployTime>
				<turrets>
					<li>
						<turretDef>TestAT_Turret</turretDef>
						<renderProperties>
							<north>(0,0)</north>
							<south>(0,0)</south>
							<east>(0,0)</east>
						</renderProperties>
						<deployment>Deployed</deployment>
						<gizmoLabel>AT Gun</gizmoLabel>
						<angleRestricted>(330,30)</angleRestricted>
						<aimPieOffset>(0, 1.2)</aimPieOffset>
						<drawLayer>-1</drawLayer>
						<key>pivotGun</key>
					</li>
				</turrets>
			</li>
		</comps>
	</Vehicles.VehicleDef>

	<Vehicles.VehicleTurretDef ParentName="VehicleTurretBase">
		<defName>TestAT_Turret</defName>
		<label>Anti Tank Gun</label>
		<graphicData>
			<texPath>Vehicles/AT/vehicle_turret</texPath>
			<graphicClass>Vehicles.Graphic_Turret</graphicClass>
			<shaderType>CutoutComplexPattern</shaderType>
			<drawSize>4</drawSize>
			<layer>1</layer>
		</graphicData>
		<magazineCapacity>1</magazineCapacity>
		<chargePerAmmoCount>5</chargePerAmmoCount>
		<genericAmmo>true</genericAmmo>
		<ammunition>
			<thingDefs>
				<li>Steel</li>
			</thingDefs>
		</ammunition>
		<minRange>3.9</minRange>
		<maxRange>45.9</maxRange>
		<rotationSpeed>0.5</rotationSpeed>
		<reloadTimer>3</reloadTimer>
		<warmUpTimer>2.5</warmUpTimer>
		<autoSnapTargeting>True</autoSnapTargeting>
		<shotSound>RT_Shot_QF6Sound</shotSound>
		<reloadSound>Artillery_ShellLoaded</reloadSound>
		<projectile>RT_TestAT_Bullet</projectile>
		<projectileOffset>1.2</projectileOffset>
		<projectileShifting>
			<li>0</li>
		</projectileShifting>

		<graphics>
			<li>
				<graphicData>
					<texPath>Vehicles/AT/vehicle_barrel</texPath>
					<drawSize>4</drawSize>
					<graphicClass>Vehicles.Graphic_Turret</graphicClass>
					<shaderType>CutoutComplexPattern</shaderType>
					<layer>2</layer>
				</graphicData>
				<recoil>
					<distanceTotal>0.35</distanceTotal>
					<distancePerTick>0.05</distancePerTick>
					<speedMultiplierPostRecoil>0.1</speedMultiplierPostRecoil>
				</recoil>
			</li>
		</graphics>
		<fireModes>
			<li>
				<shotsPerBurst>1</shotsPerBurst>
				<ticksBetweenBursts>60</ticksBetweenBursts>
				<label>Single</label>
				<texPath>UI/Gizmos/FireRate_Single</texPath>
			</li>
		</fireModes>
		<motes>
			<li>
				<cycles>1</cycles>
				<moteDef>Mote_CannonPlume</moteDef>
				<animationType>Reset</animationType>
				<offset>(0,0,2.5)</offset>
			</li>
		</motes>
	</Vehicles.VehicleTurretDef>

	<ThingDef ParentName="BaseBullet">
		<defName>RT_TestAT_Bullet</defName>
		<label>AT bullet</label>
		<graphicData>
			<texPath>Things/Projectile/Bullet_Big</texPath>
			<graphicClass>Graphic_Single</graphicClass>
			<drawSize>2</drawSize>
		</graphicData>
		<projectile>
			<damageDef>Bullet</damageDef>
			<damageAmountBase>100</damageAmountBase>
			<armorPenetrationBase>0.75</armorPenetrationBase>
			<stoppingPower>5</stoppingPower>
			<speed>200</speed>
		</projectile>
	</ThingDef>
</Defs>