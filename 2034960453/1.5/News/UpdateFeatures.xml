<?xml version='1.0' encoding='UTF-8'?>
<Defs>
  <HugsLib.UpdateFeatureDef Abstract="True" Name="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <modNameReadable>While You're Up (with add-on for PUAH)</modNameReadable>
    <modIdentifier>CodeOptimist.JobsOfOpportunity</modIdentifier>
    <linkUrl>https://discord.gg/pnZGQAN</linkUrl>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_1_0_0</defName>
    <assemblyVersion>1.0.0</assemblyVersion>
    <content><![CDATA[<color=teal>Opportunistic hauls</color>
Vanilla has support for opportunities, but with limitations: haulable near your <b>start</b> position, and storage near your job.
We prefer these, but drop them as requirements to include hauls along the path.

• Triggers <color=grey><b><i>Mehni's</i> Pick Up And Haul</b></color>.

Haul extra construction supplies closer
If hauling supplies to storage would bring them closer to their blueprint, do that first (grabbing extra).
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_1_1_0</defName>
    <assemblyVersion>1.1.0</assemblyVersion>
    <content><![CDATA[We skip opportunities when bleeding or forming a caravan.

• Updated <i>Haul extra resources</i>
Now works as expected: instead of denying the inefficient supply job so <i>some</i> hauler <i>eventually</i> hauls, the builder themselves will.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_1_2_0</defName>
    <assemblyVersion>1.2.0</assemblyVersion>
    <content><![CDATA[• Hauls are substantially improved on the default "recommended" setting. No longer should distant wood cut or metal mined be neglected.
(I've integrated the very last vanilla pathing check into this mod's magic.)

• Setting tooltips updated with detailed descriptions.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_1_4_0</defName>
    <assemblyVersion>1.4.0</assemblyVersion>
    <content><![CDATA[Pick Up And Haul+: Opportunities
Modified to grab only surrounding things whose unload path is also opportunistic.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_1_5_0</defName>
    <assemblyVersion>1.5.0</assemblyVersion>
    <content><![CDATA[• New job descriptions.
• Added <i>Enabled</i> setting for troubleshooting without restarts.
• Improved settings and descriptions.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_1_5_1</defName>
    <assemblyVersion>1.5.1</assemblyVersion>
    <content><![CDATA[• Compatibility with <color=grey><b><i>KV's</i> Infinite Storage</b></color>: <i>Haul extra resources</i> should now work instead of looping on storage and retrieval.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_1_6_0</defName>
    <assemblyVersion>1.6.0</assemblyVersion>
    <content><![CDATA[Haul extra bill ingredients closer
If hauling ingredients to storage would bring them closer to their workbench, do that first (grabbing extra).
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_1_6_1</defName>
    <assemblyVersion>1.6.1</assemblyVersion>
    <content><![CDATA[• Fixed <i>Haul extra ingredients</i> to no longer cause "Standing" loop when incapable. (Missed a basic check vanilla already did in the <i>Haul extra supplies</i> scenario.)
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_1_6_2</defName>
    <assemblyVersion>1.6.2</assemblyVersion>
    <content><![CDATA[• Fixed <i>Haul extra resources</i> to no longer cause "Standing" loop when ingredient is in a pawn inventory. Fixes surgery with <i>Smart Medicine</i>, compatibility with <i>Build From Inventory</i>, and others.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_2_0_0</defName>
    <assemblyVersion>2.0.0</assemblyVersion>
    <content><![CDATA[<color=teal><i>Pick Up And Haul+</i>: Better unloading</color>
We enhance all inventory hauling by unloading only once at each storage destination, in closest order.
We cache haulable destinations to improve performance.

• <i>Haul extra resources</i> will trigger more often:
  - Fixed hauling from existing storage, not just un-stored.
  - New <i>from same-priority storage</i> setting.
  - Checks closest storage (to destination, not thing) for closeness to destination.

• Added job reports for <i>Haul extra resources</i> and efficient unloading.
• Updated <i>Draw pawn detours</i> to include resource hauls (magenta & cyan).
• Updated for RimWorld 1.3.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_2_1_0</defName>
    <assemblyVersion>2.1.0</assemblyVersion>
    <content><![CDATA[• Improving storage mod compatibility:
  - A̶d̶d̶e̶d̶ ̶"̶S̶t̶o̶c̶k̶p̶i̶l̶e̶s̶ ̶o̶n̶l̶y̶"̶ ̶s̶e̶t̶t̶i̶n̶g̶ ̶(̶o̶n̶ ̶b̶y̶ ̶d̶e̶f̶a̶u̶l̶t̶)̶.̶
  - Switched to vanilla-style settings window (future room for a storage building allow-list).

• Setting for <i>Draw colored path detours</i> is now saved.
    Try it out, it's fun! See tooltip for description.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_2_1_1</defName>
    <assemblyVersion>2.1.1</assemblyVersion>
    <content><![CDATA[• Fixed hauling loop issue with PUAH, chunks, and multiple dumping stockpiles.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_2_1_2</defName>
    <assemblyVersion>2.1.2</assemblyVersion>
    <content><![CDATA[• Fixed inventory hauling check to work with non-Pawns (e.g. <i>Misc. Robots</i> mod).
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_2_1_3</defName>
    <assemblyVersion>2.1.3</assemblyVersion>
    <content><![CDATA[• Fixed <i>Extra resource</i> hauls occasionally being recalculated many times in 1 tick.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_2_1_4</defName>
    <assemblyVersion>2.1.4</assemblyVersion>
    <content><![CDATA[• Fixed recent "̶S̶t̶o̶c̶k̶p̶i̶l̶e̶s̶ ̶o̶n̶l̶y̶"̶ ̶s̶e̶t̶t̶i̶n̶g̶ accidentally applying to all inventory hauling (PUAH).
• Clarity improvements to mod settings dialog.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_2_3_0</defName>
    <assemblyVersion>2.3.0</assemblyVersion>
    <content><![CDATA[<color=teal>Storage building filters for mod compatibility</color>
Permit or deny for any storage building through settings, or leave automatically managed with mod updates.

Skip opportunities when forming a caravan.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_3_0_0</defName>
    <assemblyVersion>3.0.0</assemblyVersion>
    <content><![CDATA[BUG FIXES & UI UPDATE

• Opportunities
  - Now prefer storage (of highest priority) closest to job, not to thing.
  - Added stockpile checkbox and building filters.
  - New job report: "on the way to [TARGET]"

• Supplies & Ingredients
  - Added stockpile checkbox.
  - New job report: "closer to [TARGET]"
   - Pick Up And Haul+:
    - Modified to grab extra things headed to the same storage (when higher priority) unless bleeding.
    - Grab extra supplies & ingredients headed to the same storage (when equal priority).

• Pick Up And Haul+:
  - Fixed unloading storage choice to match calculation for haul.
  - After closest storage, will unload by thing category like original PUAH.
  - Improved performance by caching haulable destinations.

• Redesigned settings dialog.
• Put job strings in XML for easier translation.
• Many code quality improvements that made all of this much easier.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_3_0_1</defName>
    <assemblyVersion>3.0.1</assemblyVersion>
    <content><![CDATA[• Renamed mod to ^ from: Jobs of Opportunity (While You're Up)
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_3_0_2</defName>
    <assemblyVersion>3.0.2</assemblyVersion>
    <content><![CDATA[• Fixed a v3.0 crash related to storage capacity with PUAH.
(I was making PUAH cache haul destinations where it shouldn't: in a loop!)
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_3_1_0</defName>
    <assemblyVersion>3.1.0</assemblyVersion>
    <content><![CDATA[• Improvements for non-<i>Pick Up And Haul</i> users (PUAH is too complex for these)
  - Only haul an ingredient to storage if there are extras
  - Only haul a construction supply to storage if there are extras
    - Haul largest nearby supply stack instead of absolute closest
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_3_1_1</defName>
    <assemblyVersion>3.1.1</assemblyVersion>
    <content><![CDATA[• Fixed <i>Haul extra supplies</i> accidentally disabled since v2.1.3.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_3_1_2</defName>
    <assemblyVersion>3.1.2</assemblyVersion>
    <content><![CDATA[• PUAH unloading
  - Fix potential <i>IndexOutOfRange</i> error; performance improvement.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_3_1_3</defName>
    <assemblyVersion>3.1.3</assemblyVersion>
    <content><![CDATA[• A simpler, more complete fix than v3.0.2 for a PUAH-performance-boost related crash.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_3_1_4</defName>
    <assemblyVersion>3.1.4</assemblyVersion>
    <content><![CDATA[• Fixed <i>Haul extra supplies</i> to check incapable of <i>dumb labor</i> etc.
  (Like <i>opportunities</i> and <i>ingredients</i>.)
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_3_2_0</defName>
    <assemblyVersion>3.2.0</assemblyVersion>
    <content><![CDATA[Features
• <i>Pathfinding</i> option added to settings (off by default).

Fixes
• Performance improvements to <i>Opportunities</i>.
• Skip opportunities when gathering animals (not just items) for a caravan.
• Mods which patch <i>ThingFilter</i> at startup will no longer break WYU settings window.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_3_2_1</defName>
    <assemblyVersion>3.2.1</assemblyVersion>
    <content><![CDATA[• Fixed hauls "on the way to" workbenches to use first ingredient location!
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_3_2_2</defName>
    <assemblyVersion>3.2.2</assemblyVersion>
    <content><![CDATA[• Fix for a variety of bad "on the way to" hauls from a stupid mistake in v3.2.1 (Oct 24th).
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_4_0_0</defName>
    <assemblyVersion>4.0.0</assemblyVersion>
    <content><![CDATA[v4 <b>GET THE HECK TO WORK</b> EDITION

<i>Hauling fixes</i>
• Fixed chains of opportunity -> unload -> opportunity.
• Also fixed back-to-back opportunistic hauls.
• By default, perform a final pathfinding check: if it fails, no opportunity.
  (Never a bad haul again; mountain bases rejoice!)
• During unloading, if our cell became occupied and the next is too far, drop items. (Rare. Better than alternatives.)
• Prefer stockpiles not closest to <i>thing</i> (pre-v3), not closest to <i>job</i> (pre-v4), but closest to <i>midway</i> between thing and job!

<i>Other</i>
• Major reorganization and documentation improvement of entire codebase.
• Added "Make colony (While You're Up)" to <i>Debug actions menu: Autotests</i> (save your game first). 
• Better debug visualization of pawn detours. Enabled from options.
• New dedicated "Hauls of Opportunity: Advanced Settings" tab with colors, arrows, and thorough explanations. You won't need it, but it's beautiful!
• Performance improvement and simplification from reduction in unnecessary object-oriented-ness.
• Performance improvement from using `DistanceToSquared` in some places.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_4_0_1</defName>
    <assemblyVersion>4.0.1</assemblyVersion>
    <content><![CDATA[(June 5th) Fixed errors when loading a save with in-progress inventory hauls.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_4_0_2</defName>
    <assemblyVersion>4.0.2</assemblyVersion>
    <content><![CDATA[(June 8th) Fixed cancelled jobs from repeating on the same tick.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_4_0_3</defName>
    <assemblyVersion>4.0.3</assemblyVersion>
    <content><![CDATA[(June 26th) Fixed error when pathfinding to an animal's inventory.
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_4_0_4</defName>
    <assemblyVersion>4.0.4</assemblyVersion>
    <content><![CDATA[• Fixed an oversight in the handling of <i>Common Sense</i> mod compatibility that caused pawns to loop while "Efficiently unloading".

• Bleeding pawns will no longer haul extra <i><b>non</b>-resources</i> "closer to" a job.
(Described in the <i>Pick Up And Haul+</i> tab in mod settings.)
]]></content>
  </HugsLib.UpdateFeatureDef>
  <HugsLib.UpdateFeatureDef ParentName="CodeOptimist.JobsOfOpportunity_UpdateFeatureBase">
    <defName>CodeOptimist_JobsOfOpportunity_4_0_5</defName>
    <assemblyVersion>4.0.5</assemblyVersion>
    <content><![CDATA[April 11th, 2024. Updated for RimWorld v1.5 "Anomaly".

If willing, please report issues immediately via Discord link here ↗ or in Mods menu.
]]></content>
  </HugsLib.UpdateFeatureDef>
</Defs>
