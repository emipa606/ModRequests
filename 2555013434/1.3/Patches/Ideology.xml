<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <!-- Add missing roleApparelRequirements & Vanilla -->
  <Operation Class="PatchOperationSequence">
    <operations>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/PreceptDef[defName="IdeoRole_MedicalSpecialist"]/roleApparelRequirements</xpath>

        <nomatch Class="PatchOperationInsert">
          <xpath>/Defs/PreceptDef[defName="IdeoRole_MedicalSpecialist"]/description</xpath>

          <value>
            <roleApparelRequirements></roleApparelRequirements>
          </value>
        </nomatch>

        <match Class="PatchOperationTest">
          <xpath>/Defs/PreceptDef[defName="IdeoRole_MedicalSpecialist"]/roleApparelRequirements</xpath>

          <success>Always</success>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/PreceptDef[defName="IdeoRole_AnimalsSpecialist"]/roleApparelRequirements</xpath>

        <nomatch Class="PatchOperationInsert">
          <xpath>/Defs/PreceptDef[defName="IdeoRole_AnimalsSpecialist"]/description</xpath>

          <value>
            <roleApparelRequirements></roleApparelRequirements>
          </value>
        </nomatch>

        <match Class="PatchOperationTest">
          <xpath>/Defs/PreceptDef[defName="IdeoRole_AnimalsSpecialist"]/roleApparelRequirements</xpath>

          <success>Always</success>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/PreceptDef[defName="IdeoRole_MiningSpecialist"]/roleApparelRequirements</xpath>

        <nomatch Class="PatchOperationInsert">
          <xpath>/Defs/PreceptDef[defName="IdeoRole_MiningSpecialist"]/description</xpath>

          <value>
            <roleApparelRequirements></roleApparelRequirements>
          </value>
        </nomatch>

        <match Class="PatchOperationTest">
          <xpath>/Defs/PreceptDef[defName="IdeoRole_MiningSpecialist"]/roleApparelRequirements</xpath>

          <success>Always</success>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/PreceptDef[defName="IdeoRole_ProductionSpecialist"]/roleApparelRequirements</xpath>

        <nomatch Class="PatchOperationInsert">
          <xpath>/Defs/PreceptDef[defName="IdeoRole_ProductionSpecialist"]/description</xpath>

          <value>
            <roleApparelRequirements></roleApparelRequirements>
          </value>
        </nomatch>

        <match Class="PatchOperationTest">
          <xpath>/Defs/PreceptDef[defName="IdeoRole_ProductionSpecialist"]/roleApparelRequirements</xpath>

          <success>Always</success>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/PreceptDef[defName="IdeoRole_ResearchSpecialist"]/roleApparelRequirements</xpath>

        <nomatch Class="PatchOperationInsert">
          <xpath>/Defs/PreceptDef[defName="IdeoRole_ResearchSpecialist"]/description</xpath>

          <value>
            <roleApparelRequirements></roleApparelRequirements>
          </value>
        </nomatch>

        <match Class="PatchOperationTest">
          <xpath>/Defs/PreceptDef[defName="IdeoRole_ResearchSpecialist"]/roleApparelRequirements</xpath>

          <success>Always</success>
        </match>
      </li>
      <li Class="PatchOperationConditional">
        <xpath>/Defs/PreceptDef[defName="IdeoRole_MeleeSpecialist"]/roleApparelRequirements</xpath>

        <nomatch Class="PatchOperationInsert">
          <xpath>/Defs/PreceptDef[defName="IdeoRole_MeleeSpecialist"]/description</xpath>

          <value>
            <roleApparelRequirements></roleApparelRequirements>
          </value>
        </nomatch>

        <match Class="PatchOperationTest">
          <xpath>/Defs/PreceptDef[defName="IdeoRole_MeleeSpecialist"]/roleApparelRequirements</xpath>

          <success>Always</success>
        </match>
      </li>
      <li Class="PatchOperationAdd">
        <xpath>/Defs/PreceptDef[defName="IdeoRole_Moralist" or defName="IdeoRole_Leader" or defName="IdeoRole_PlantSpecialist" or defName="IdeoRole_ShootingSpecialist" or defName="IdeoRole_MedicalSpecialist" or defName="IdeoRole_AnimalsSpecialist" or defName="IdeoRole_MiningSpecialist" or defName="IdeoRole_ProductionSpecialist" or defName="IdeoRole_ResearchSpecialist" or defName="IdeoRole_MeleeSpecialist"]/roleApparelRequirements</xpath>

        <value>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>UpperHead</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_BowlerHat</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>UpperHead</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_SimpleHelmet</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>UpperHead</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_AdvancedHelmet</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>Torso</li>
                <li>Legs</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_TribalA</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>Torso</li>
                <li>Neck</li>
                <li>Shoulders</li>
                <li>Arms</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_CollarShirt</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>Torso</li>
                <li>Neck</li>
                <li>Shoulders</li>
                <li>Arms</li>
                <li>Legs</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_Duster</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>Torso</li>
                <li>Neck</li>
                <li>Shoulders</li>
                <li>Arms</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_Jacket</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>UpperHead</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_Tuque</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>Torso</li>
                <li>Neck</li>
                <li>Shoulders</li>
                <li>Arms</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_Parka</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>Torso</li>
                <li>Neck</li>
                <li>Shoulders</li>
                <li>Arms</li>
                <li>Legs</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_PlateArmor</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>Torso</li>
                <li>Neck</li>
                <li>Shoulders</li>
                <li>Arms</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_FlakJacket</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>FullHead</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_ArmorHelmetRecon</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>Torso</li>
                <li>Neck</li>
                <li>Shoulders</li>
                <li>Arms</li>
                <li>Legs</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_ArmorRecon</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>FullHead</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_PowerArmorHelmet</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>Torso</li>
                <li>Neck</li>
                <li>Shoulders</li>
                <li>Arms</li>
                <li>Legs</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_PowerArmor</li>
              </requiredDefs>
            </requirement>
          </li>
          <li>
            <requirement>
              <bodyPartGroupsMatchAny>
                <li>UpperHead</li>
              </bodyPartGroupsMatchAny>
              <requiredDefs>
                <li>Apparel_PsychicFoilHelmet</li>
              </requiredDefs>
            </requirement>
          </li>
        </value>
      </li>
      <li Class="XmlExtensions.OptionalPatch">
        <modId>DevDesigner.RolesApparelUnlocked</modId>
        <key>toggle_memes_and_structures_roles</key>
        <defaultValue>false</defaultValue>

        <caseTrue>
          <Operation Class="PatchOperationFindMod">
            <mods>
              <li>Vanilla Ideology Expanded - Memes and Structures</li>
            </mods>

            <match Class="PatchOperationAdd">
              <xpath>/Defs/PreceptDef[defName="VME_IdeoRole_Nurse" or defName="VME_IdeoRole_Commissar" or defName="VME_IdeoRole_FireKeeper" or defName="VME_IdeoRole_Fleshcrafter" or defName="VME_IdeoRole_InsectoidHerder" or defName="VME_IdeoRole_Mechacker" or defName="VME_IdeoRole_Merchant" or defName="VME_IdeoRole_PartyHost" or defName="VME_IdeoRole_LeaderSecond" or defName="VME_IdeoRole_LeaderThird" or defName="VME_IdeoRole_Patissier"]/roleApparelRequirements</xpath>

              <value>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_SimpleHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_AdvancedHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_TribalA</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_CollarShirt</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_Duster</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_Jacket</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_Tuque</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_Parka</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_PlateArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_FlakJacket</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_ArmorHelmetRecon</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_ArmorRecon</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_PowerArmorHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_PowerArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_PsychicFoilHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
              </value>
            </match>
          </Operation>
        </caseTrue>
      </li>
    </operations>
  </Operation>

  <!-- Royalty -->
  <Operation Class="XmlExtensions.OptionalPatch">
    <modId>DevDesigner.RolesApparelUnlocked</modId>
    <key>toggle_royalty</key>
    <defaultValue>true</defaultValue>

    <caseTrue>
      <Operation Class="PatchOperationFindMod">
        <mods>
          <li>Royalty</li>
        </mods>

        <match Class="PatchOperationSequence">
          <operations>
            <li Class="PatchOperationAdd">
              <xpath>/Defs/PreceptDef[defName="IdeoRole_Moralist" or defName="IdeoRole_Leader" or defName="IdeoRole_PlantSpecialist" or defName="IdeoRole_ShootingSpecialist" or defName="IdeoRole_MedicalSpecialist" or defName="IdeoRole_AnimalsSpecialist" or defName="IdeoRole_MiningSpecialist" or defName="IdeoRole_ProductionSpecialist" or defName="IdeoRole_ResearchSpecialist" or defName="IdeoRole_MeleeSpecialist"]/roleApparelRequirements</xpath>

              <value>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_PsyfocusHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_EltexSkullcap</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_PsyfocusShirt</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_PsyfocusVest</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_PsyfocusRobe</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_Gunlink</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_ShirtRuffle</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_RobeRoyal</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_HatTop</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_Coronet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_Crown</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_CrownStellic</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_ArmorHelmetCataphract</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_ArmorCataphract</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_ArmorHelmetCataphractPrestige</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_ArmorCataphractPrestige</li>
                    </requiredDefs>
                  </requirement>
                </li>
              </value>
            </li>
            <li Class="PatchOperationAdd">
              <xpath>/Defs/PreceptDef[defName="IdeoRole_Leader"]/roleApparelRequirements</xpath>


              <value>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_Cape</li>
                    </requiredDefs>
                  </requirement>
                </li>
              </value>
            </li>
            <li Class="XmlExtensions.OptionalPatch">
              <modId>DevDesigner.RolesApparelUnlocked</modId>
              <key>toggle_memes_and_structures_roles</key>
              <defaultValue>false</defaultValue>

              <caseTrue>
                <Operation Class="PatchOperationFindMod">
                  <mods>
                    <li>Vanilla Ideology Expanded - Memes and Structures</li>
                  </mods>

                  <match Class="PatchOperationAdd">
                    <xpath>/Defs/PreceptDef[defName="VME_IdeoRole_Nurse" or defName="VME_IdeoRole_Commissar" or defName="VME_IdeoRole_FireKeeper" or defName="VME_IdeoRole_Fleshcrafter" or defName="VME_IdeoRole_InsectoidHerder" or defName="VME_IdeoRole_Mechacker" or defName="VME_IdeoRole_Merchant" or defName="VME_IdeoRole_PartyHost" or defName="VME_IdeoRole_LeaderSecond" or defName="VME_IdeoRole_LeaderThird" or defName="VME_IdeoRole_Patissier"]/roleApparelRequirements</xpath>

                    <value>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_PsyfocusHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_EltexSkullcap</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_PsyfocusShirt</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_PsyfocusVest</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_PsyfocusRobe</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_Gunlink</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_ShirtRuffle</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_RobeRoyal</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_HatTop</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_Coronet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_Crown</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_CrownStellic</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_ArmorHelmetCataphract</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_ArmorCataphract</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_ArmorHelmetCataphractPrestige</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_ArmorCataphractPrestige</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                    </value>
                  </match>
                </Operation>
              </caseTrue>
            </li>
          </operations>
        </match>
      </Operation>
    </caseTrue>
  </Operation>

  <!-- Vanilla Factions Expanded - Vikings -->
  <Operation Class="XmlExtensions.OptionalPatch">
    <modId>DevDesigner.RolesApparelUnlocked</modId>
    <key>toggle_vikings</key>
    <defaultValue>true</defaultValue>

    <caseTrue>
      <Operation Class="PatchOperationFindMod">
        <mods>
          <li>Vanilla Factions Expanded - Vikings</li>
        </mods>

        <match Class="PatchOperationSequence">
          <operations>
            <li Class="PatchOperationAdd">
              <xpath>/Defs/PreceptDef[defName="IdeoRole_Moralist" or defName="IdeoRole_Leader" or defName="IdeoRole_PlantSpecialist" or defName="IdeoRole_ShootingSpecialist" or defName="IdeoRole_MedicalSpecialist" or defName="IdeoRole_AnimalsSpecialist" or defName="IdeoRole_MiningSpecialist" or defName="IdeoRole_ProductionSpecialist" or defName="IdeoRole_ResearchSpecialist" or defName="IdeoRole_MeleeSpecialist"]/roleApparelRequirements</xpath>

              <value>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEV_Apparel_GuardianHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEV_Apparel_GuardianArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEV_Apparel_LeatherHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Shoulders</li>
                      <li>Torso</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEV_LeatherArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEV_Apparel_RavagerHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Torso</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEV_Apparel_RavagerArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEV_MooseHeaddress</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEV_BearHeaddress</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEV_JarlCrown</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Neck</li>
                      <li>Torso</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEV_Apparel_JarlCape</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Neck</li>
                      <li>Torso</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEV_Apparel_RoyalFurCoat</li>
                    </requiredDefs>
                  </requirement>
                </li>
              </value>
            </li>
            <li Class="XmlExtensions.OptionalPatch">
              <modId>DevDesigner.RolesApparelUnlocked</modId>
              <key>toggle_memes_and_structures_roles</key>
              <defaultValue>false</defaultValue>

              <caseTrue>
                <Operation Class="PatchOperationFindMod">
                  <mods>
                    <li>Vanilla Ideology Expanded - Memes and Structures</li>
                  </mods>

                  <match Class="PatchOperationAdd">
                    <xpath>/Defs/PreceptDef[defName="VME_IdeoRole_Nurse" or defName="VME_IdeoRole_Commissar" or defName="VME_IdeoRole_FireKeeper" or defName="VME_IdeoRole_Fleshcrafter" or defName="VME_IdeoRole_InsectoidHerder" or defName="VME_IdeoRole_Mechacker" or defName="VME_IdeoRole_Merchant" or defName="VME_IdeoRole_PartyHost" or defName="VME_IdeoRole_LeaderSecond" or defName="VME_IdeoRole_LeaderThird" or defName="VME_IdeoRole_Patissier"]/roleApparelRequirements</xpath>

                    <value>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEV_Apparel_GuardianHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEV_Apparel_GuardianArmor</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEV_Apparel_LeatherHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Shoulders</li>
                            <li>Torso</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEV_LeatherArmor</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEV_Apparel_RavagerHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Torso</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEV_Apparel_RavagerArmor</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEV_MooseHeaddress</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEV_BearHeaddress</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEV_JarlCrown</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Neck</li>
                            <li>Torso</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEV_Apparel_JarlCape</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Neck</li>
                            <li>Torso</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEV_Apparel_RoyalFurCoat</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                    </value>
                  </match>
                </Operation>
              </caseTrue>
            </li>
          </operations>
        </match>
      </Operation>
    </caseTrue>
  </Operation>

  <!-- Vanilla Factions Expanded - Medieval -->
  <Operation Class="XmlExtensions.OptionalPatch">
    <modId>DevDesigner.RolesApparelUnlocked</modId>
    <key>toggle_medieval</key>
    <defaultValue>true</defaultValue>

    <caseTrue>
      <Operation Class="PatchOperationFindMod">
        <mods>
          <li>Vanilla Factions Expanded - Medieval</li>
        </mods>

        <match Class="PatchOperationSequence">
          <operations>
            <li Class="PatchOperationAdd">
              <xpath>/Defs/PreceptDef[defName="IdeoRole_Moralist" or defName="IdeoRole_Leader" or defName="IdeoRole_PlantSpecialist" or defName="IdeoRole_ShootingSpecialist" or defName="IdeoRole_MedicalSpecialist" or defName="IdeoRole_AnimalsSpecialist" or defName="IdeoRole_MiningSpecialist" or defName="IdeoRole_ProductionSpecialist" or defName="IdeoRole_ResearchSpecialist" or defName="IdeoRole_MeleeSpecialist"]/roleApparelRequirements</xpath>

              <value>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEM_Apparel_PlateHelmetLight</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEM_Apparel_PlateHelmetHeavy</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEM_Apparel_PlateArmorHeavy</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEM_Apparel_Tabard</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEM_Apparel_JesterHat</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Arms</li>
                      <li>Shoulders</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEM_Apparel_JesterOutfit</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEM_Apparel_KingsCrown</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Legs</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEM_Apparel_KingsRobes</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VFEM_Apparel_PlagueMask</li>
                    </requiredDefs>
                  </requirement>
                </li>
              </value>
            </li>
            <li Class="XmlExtensions.OptionalPatch">
              <modId>DevDesigner.RolesApparelUnlocked</modId>
              <key>toggle_memes_and_structures_roles</key>
              <defaultValue>false</defaultValue>

              <caseTrue>
                <Operation Class="PatchOperationFindMod">
                  <mods>
                    <li>Vanilla Ideology Expanded - Memes and Structures</li>
                  </mods>

                  <match Class="PatchOperationAdd">
                    <xpath>/Defs/PreceptDef[defName="VME_IdeoRole_Nurse" or defName="VME_IdeoRole_Commissar" or defName="VME_IdeoRole_FireKeeper" or defName="VME_IdeoRole_Fleshcrafter" or defName="VME_IdeoRole_InsectoidHerder" or defName="VME_IdeoRole_Mechacker" or defName="VME_IdeoRole_Merchant" or defName="VME_IdeoRole_PartyHost" or defName="VME_IdeoRole_LeaderSecond" or defName="VME_IdeoRole_LeaderThird" or defName="VME_IdeoRole_Patissier"]/roleApparelRequirements</xpath>

                    <value>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEM_Apparel_PlateHelmetLight</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEM_Apparel_PlateHelmetHeavy</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEM_Apparel_PlateArmorHeavy</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEM_Apparel_Tabard</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEM_Apparel_JesterHat</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Arms</li>
                            <li>Shoulders</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEM_Apparel_JesterOutfit</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEM_Apparel_KingsCrown</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Legs</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEM_Apparel_KingsRobes</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VFEM_Apparel_PlagueMask</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                    </value>
                  </match>
                </Operation>
              </caseTrue>
            </li>
          </operations>
        </match>
      </Operation>
    </caseTrue>
  </Operation>

  <!-- Kenshi Armory -->
  <Operation Class="XmlExtensions.OptionalPatch">
    <modId>DevDesigner.RolesApparelUnlocked</modId>
    <key>toggle_kenshi</key>
    <defaultValue>true</defaultValue>

    <caseTrue>
      <Operation Class="PatchOperationFindMod">
        <mods>
          <li>Kenshi Armory</li>
        </mods>

        <match Class="PatchOperationSequence">
          <operations>
            <li Class="PatchOperationAdd">
              <xpath>/Defs/PreceptDef[defName="IdeoRole_Moralist" or defName="IdeoRole_Leader" or defName="IdeoRole_PlantSpecialist" or defName="IdeoRole_ShootingSpecialist" or defName="IdeoRole_MedicalSpecialist" or defName="IdeoRole_AnimalsSpecialist" or defName="IdeoRole_MiningSpecialist" or defName="IdeoRole_ProductionSpecialist" or defName="IdeoRole_ResearchSpecialist" or defName="IdeoRole_MeleeSpecialist"]/roleApparelRequirements</xpath>

              <value>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_IronHat</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_NinjaMask</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_KusariZukin</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_ArmouredHood</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_BasketHat</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_HolyChestPlate</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_HeavyPaladinsHelm</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Hands</li>
                      <li>Legs</li>
                      <li>Feet</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_HeavyHolyChestPlate</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_HeavyHachigane</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_SamuraiHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Hands</li>
                      <li>Legs</li>
                      <li>Feet</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_SamuraiPlateArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_UnstrainedTinCan</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Hands</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_UnstrainedMercenaryPlate</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_PaladinsHolyChestPlate</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_PaladinsHeavyHachigane</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Hands</li>
                      <li>Legs</li>
                      <li>Feet</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_PaladinsHeavyPlate</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_PaladinsHeavyHelm</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Hands</li>
                      <li>Legs</li>
                      <li>Feet</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_EmpireSamuraiPlateArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_EmpireSamuraiHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_CrabRaiderHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Hands</li>
                      <li>Legs</li>
                      <li>Feet</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_CrabArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Hands</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_GuildMercenaryPlate</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_TinCan</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Hands</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_HackStopperJacket</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Kenshi_HackStopperHat</li>
                    </requiredDefs>
                  </requirement>
                </li>
              </value>
            </li>
            <li Class="XmlExtensions.OptionalPatch">
              <modId>DevDesigner.RolesApparelUnlocked</modId>
              <key>toggle_memes_and_structures_roles</key>
              <defaultValue>false</defaultValue>

              <caseTrue>
                <Operation Class="PatchOperationFindMod">
                  <mods>
                    <li>Vanilla Ideology Expanded - Memes and Structures</li>
                  </mods>

                  <match Class="PatchOperationAdd">
                    <xpath>/Defs/PreceptDef[defName="VME_IdeoRole_Nurse" or defName="VME_IdeoRole_Commissar" or defName="VME_IdeoRole_FireKeeper" or defName="VME_IdeoRole_Fleshcrafter" or defName="VME_IdeoRole_InsectoidHerder" or defName="VME_IdeoRole_Mechacker" or defName="VME_IdeoRole_Merchant" or defName="VME_IdeoRole_PartyHost" or defName="VME_IdeoRole_LeaderSecond" or defName="VME_IdeoRole_LeaderThird" or defName="VME_IdeoRole_Patissier"]/roleApparelRequirements</xpath>

                    <value>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_IronHat</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_NinjaMask</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_KusariZukin</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_ArmouredHood</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_BasketHat</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_HolyChestPlate</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_HeavyPaladinsHelm</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Hands</li>
                            <li>Legs</li>
                            <li>Feet</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_HeavyHolyChestPlate</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_HeavyHachigane</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_SamuraiHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Hands</li>
                            <li>Legs</li>
                            <li>Feet</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_SamuraiPlateArmor</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_UnstrainedTinCan</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Hands</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_UnstrainedMercenaryPlate</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_PaladinsHolyChestPlate</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_PaladinsHeavyHachigane</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Hands</li>
                            <li>Legs</li>
                            <li>Feet</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_PaladinsHeavyPlate</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_PaladinsHeavyHelm</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Hands</li>
                            <li>Legs</li>
                            <li>Feet</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_EmpireSamuraiPlateArmor</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_EmpireSamuraiHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_CrabRaiderHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Hands</li>
                            <li>Legs</li>
                            <li>Feet</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_CrabArmor</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Hands</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_GuildMercenaryPlate</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_TinCan</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Hands</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_HackStopperJacket</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Kenshi_HackStopperHat</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                    </value>
                  </match>
                </Operation>
              </caseTrue>
            </li>
          </operations>
        </match>
      </Operation>
    </caseTrue>
  </Operation>

  <!-- Ancient Eastern Armory -->
  <Operation Class="XmlExtensions.OptionalPatch">
    <modId>DevDesigner.RolesApparelUnlocked</modId>
    <key>toggle_aea</key>
    <defaultValue>true</defaultValue>

    <caseTrue>
      <Operation Class="PatchOperationFindMod">
        <mods>
          <li>Ancient Eastern Armory</li>
        </mods>

        <match Class="PatchOperationSequence">
          <operations>
            <li Class="PatchOperationAdd">
              <xpath>/Defs/PreceptDef[defName="IdeoRole_Moralist" or defName="IdeoRole_Leader" or defName="IdeoRole_PlantSpecialist" or defName="IdeoRole_ShootingSpecialist" or defName="IdeoRole_MedicalSpecialist" or defName="IdeoRole_AnimalsSpecialist" or defName="IdeoRole_MiningSpecialist" or defName="IdeoRole_ProductionSpecialist" or defName="IdeoRole_ResearchSpecialist" or defName="IdeoRole_MeleeSpecialist"]/roleApparelRequirements</xpath>

              <value>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Hands</li>
                      <li>Legs</li>
                      <li>Feet</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_AsianNobleCloth</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_AsianNobleHat</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Hands</li>
                      <li>Legs</li>
                      <li>Feet</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_NinjaGi</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_NinjaMask</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Hands</li>
                      <li>Legs</li>
                      <li>Feet</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_SamuraiYoroi</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_SamuraiHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_SamuraiCaptainHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_AshigaruArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_AshigaruHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_QingLightArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_QingLightHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_QingHeavyHelm</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Hands</li>
                      <li>Legs</li>
                      <li>Feet</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_Brigandine</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Hands</li>
                      <li>Legs</li>
                      <li>Feet</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_LeatherBrigandine</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_BrigandineHelm</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_LeatherBrigandineHelm</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Ancient_GunnersHat</li>
                    </requiredDefs>
                  </requirement>
                </li>
              </value>
            </li>
            <li Class="XmlExtensions.OptionalPatch">
              <modId>DevDesigner.RolesApparelUnlocked</modId>
              <key>toggle_memes_and_structures_roles</key>
              <defaultValue>false</defaultValue>

              <caseTrue>
                <Operation Class="PatchOperationFindMod">
                  <mods>
                    <li>Vanilla Ideology Expanded - Memes and Structures</li>
                  </mods>

                  <match Class="PatchOperationAdd">
                    <xpath>/Defs/PreceptDef[defName="VME_IdeoRole_Nurse" or defName="VME_IdeoRole_Commissar" or defName="VME_IdeoRole_FireKeeper" or defName="VME_IdeoRole_Fleshcrafter" or defName="VME_IdeoRole_InsectoidHerder" or defName="VME_IdeoRole_Mechacker" or defName="VME_IdeoRole_Merchant" or defName="VME_IdeoRole_PartyHost" or defName="VME_IdeoRole_LeaderSecond" or defName="VME_IdeoRole_LeaderThird" or defName="VME_IdeoRole_Patissier"]/roleApparelRequirements</xpath>

                    <value>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Hands</li>
                            <li>Legs</li>
                            <li>Feet</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_AsianNobleCloth</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_AsianNobleHat</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Hands</li>
                            <li>Legs</li>
                            <li>Feet</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_NinjaGi</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_NinjaMask</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Hands</li>
                            <li>Legs</li>
                            <li>Feet</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_SamuraiYoroi</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_SamuraiHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_SamuraiCaptainHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_AshigaruArmor</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_AshigaruHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_QingLightArmor</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_QingLightHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_QingHeavyHelm</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Hands</li>
                            <li>Legs</li>
                            <li>Feet</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_Brigandine</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Hands</li>
                            <li>Legs</li>
                            <li>Feet</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_LeatherBrigandine</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_BrigandineHelm</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_LeatherBrigandineHelm</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Ancient_GunnersHat</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                    </value>
                  </match>
                </Operation>
              </caseTrue>
            </li>
          </operations>
        </match>
      </Operation>
    </caseTrue>
  </Operation>

  <!-- Anima Gear -->
  <Operation Class="XmlExtensions.OptionalPatch">
    <modId>DevDesigner.RolesApparelUnlocked</modId>
    <key>toggle_anima</key>
    <defaultValue>true</defaultValue>

    <caseTrue>
      <Operation Class="PatchOperationFindMod">
        <mods>
          <li>Anima Gear</li>
        </mods>

        <match Class="PatchOperationSequence">
          <operations>
            <li Class="PatchOperationAdd">
              <xpath>/Defs/PreceptDef[defName="IdeoRole_Moralist" or defName="IdeoRole_Leader" or defName="IdeoRole_PlantSpecialist" or defName="IdeoRole_ShootingSpecialist" or defName="IdeoRole_MedicalSpecialist" or defName="IdeoRole_AnimalsSpecialist" or defName="IdeoRole_MiningSpecialist" or defName="IdeoRole_ProductionSpecialist" or defName="IdeoRole_ResearchSpecialist" or defName="IdeoRole_MeleeSpecialist"]/roleApparelRequirements</xpath>

              <value>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_AnimaCrown</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_AnimaWarMask</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_AnimaWarVeil</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Apparel_AnimaTribal</li>
                    </requiredDefs>
                  </requirement>
                </li>
              </value>
            </li>
            <li Class="XmlExtensions.OptionalPatch">
              <modId>DevDesigner.RolesApparelUnlocked</modId>
              <key>toggle_memes_and_structures_roles</key>
              <defaultValue>false</defaultValue>

              <caseTrue>
                <Operation Class="PatchOperationFindMod">
                  <mods>
                    <li>Vanilla Ideology Expanded - Memes and Structures</li>
                  </mods>

                  <match Class="PatchOperationAdd">
                    <xpath>/Defs/PreceptDef[defName="VME_IdeoRole_Nurse" or defName="VME_IdeoRole_Commissar" or defName="VME_IdeoRole_FireKeeper" or defName="VME_IdeoRole_Fleshcrafter" or defName="VME_IdeoRole_InsectoidHerder" or defName="VME_IdeoRole_Mechacker" or defName="VME_IdeoRole_Merchant" or defName="VME_IdeoRole_PartyHost" or defName="VME_IdeoRole_LeaderSecond" or defName="VME_IdeoRole_LeaderThird" or defName="VME_IdeoRole_Patissier"]/roleApparelRequirements</xpath>

                    <value>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_AnimaCrown</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_AnimaWarMask</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_AnimaWarVeil</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Apparel_AnimaTribal</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                    </value>
                  </match>
                </Operation>
              </caseTrue>
            </li>
          </operations>
        </match>
      </Operation>
    </caseTrue>
  </Operation>

  <!-- Vanilla Armour Expanded -->
  <Operation Class="XmlExtensions.OptionalPatch">
    <modId>DevDesigner.RolesApparelUnlocked</modId>
    <key>toggle_vae</key>
    <defaultValue>true</defaultValue>

    <caseTrue>
      <Operation Class="PatchOperationFindMod">
        <mods>
          <li>Vanilla Armour Expanded</li>
        </mods>

        <match Class="PatchOperationSequence">
          <operations>
            <li Class="PatchOperationAdd">
              <xpath>/Defs/PreceptDef[defName="IdeoRole_Moralist" or defName="IdeoRole_Leader" or defName="IdeoRole_PlantSpecialist" or defName="IdeoRole_ShootingSpecialist" or defName="IdeoRole_MedicalSpecialist" or defName="IdeoRole_AnimalsSpecialist" or defName="IdeoRole_MiningSpecialist" or defName="IdeoRole_ProductionSpecialist" or defName="IdeoRole_ResearchSpecialist" or defName="IdeoRole_MeleeSpecialist"]/roleApparelRequirements</xpath>

              <value>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Neck</li>
                      <li>Torso</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Apparel_WoodenArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Headgear_StoneWarMask</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Apparel_Gambeson</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Apparel_QuiltedVest</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Apparel_PlateShoulderpads</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Apparel_Chestplate</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Apparel_Chainmail</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Apparel_PlateHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <!-- <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Neck</li>
                      <li>Torso</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Apparel_BulletproofVest</li>
                    </requiredDefs>
                  </requirement>
                </li> -->
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Headgear_GhillieHood</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Apparel_GhillieSuit</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <!-- <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Neck</li>
                      <li>Torso</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Apparel_AdvancedVest</li>
                    </requiredDefs>
                  </requirement>
                </li> -->
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Headgear_HAZMATMask</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Neck</li>
                      <li>Torso</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Apparel_HAZMATSuit</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Teeth</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Headgear_Scarf</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Headgear_Hardhat</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Headgear_SurgicalMask</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Eyes</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Headgear_Sunglasses</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Eyes</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Headgear_Glasses</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Headgear_ChefsToque</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Headgear_Balaclava</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <!-- <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Eyes</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Headgear_NightVisionGoggles</li>
                    </requiredDefs>
                  </requirement>
                </li> -->
                <!-- <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Eyes</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>VAE_Headgear_BallisticGoggles</li>
                    </requiredDefs>
                  </requirement>
                </li> -->
              </value>
            </li>
            <li Class="XmlExtensions.OptionalPatch">
              <modId>DevDesigner.RolesApparelUnlocked</modId>
              <key>toggle_memes_and_structures_roles</key>
              <defaultValue>false</defaultValue>

              <caseTrue>
                <Operation Class="PatchOperationFindMod">
                  <mods>
                    <li>Vanilla Ideology Expanded - Memes and Structures</li>
                  </mods>

                  <match Class="PatchOperationAdd">
                    <xpath>/Defs/PreceptDef[defName="VME_IdeoRole_Nurse" or defName="VME_IdeoRole_Commissar" or defName="VME_IdeoRole_FireKeeper" or defName="VME_IdeoRole_Fleshcrafter" or defName="VME_IdeoRole_InsectoidHerder" or defName="VME_IdeoRole_Mechacker" or defName="VME_IdeoRole_Merchant" or defName="VME_IdeoRole_PartyHost" or defName="VME_IdeoRole_LeaderSecond" or defName="VME_IdeoRole_LeaderThird" or defName="VME_IdeoRole_Patissier"]/roleApparelRequirements</xpath>

                    <value>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Neck</li>
                            <li>Torso</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Apparel_WoodenArmor</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Headgear_StoneWarMask</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Apparel_Gambeson</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Apparel_QuiltedVest</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Apparel_PlateShoulderpads</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Apparel_Chestplate</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Apparel_Chainmail</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Apparel_PlateHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <!-- <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Neck</li>
                            <li>Torso</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Apparel_BulletproofVest</li>
                          </requiredDefs>
                        </requirement>
                      </li> -->
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Headgear_GhillieHood</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Apparel_GhillieSuit</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <!-- <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Neck</li>
                            <li>Torso</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Apparel_AdvancedVest</li>
                          </requiredDefs>
                        </requirement>
                      </li> -->
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Headgear_HAZMATMask</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Neck</li>
                            <li>Torso</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Apparel_HAZMATSuit</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Teeth</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Headgear_Scarf</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Headgear_Hardhat</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Headgear_SurgicalMask</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Eyes</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Headgear_Sunglasses</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Eyes</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Headgear_Glasses</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Headgear_ChefsToque</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Headgear_Balaclava</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <!-- <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Eyes</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Headgear_NightVisionGoggles</li>
                          </requiredDefs>
                        </requirement>
                      </li> -->
                      <!-- <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Eyes</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>VAE_Headgear_BallisticGoggles</li>
                          </requiredDefs>
                        </requirement>
                      </li> -->
                    </value>
                  </match>
                </Operation>
              </caseTrue>
            </li>
          </operations>
        </match>
      </Operation>
    </caseTrue>
  </Operation>

  <!-- Medieval Overhaul -->
  <Operation Class="XmlExtensions.OptionalPatch">
    <modId>DevDesigner.RolesApparelUnlocked</modId>
    <key>toggle_medieval_overhaul</key>
    <defaultValue>true</defaultValue>

    <caseTrue>
      <Operation Class="PatchOperationFindMod">
        <mods>
          <li>Medieval Overhaul</li>
        </mods>

        <match Class="PatchOperationSequence">
          <operations>
            <li Class="PatchOperationAdd">
              <xpath>/Defs/PreceptDef[defName="IdeoRole_Moralist" or defName="IdeoRole_Leader" or defName="IdeoRole_PlantSpecialist" or defName="IdeoRole_ShootingSpecialist" or defName="IdeoRole_MedicalSpecialist" or defName="IdeoRole_AnimalsSpecialist" or defName="IdeoRole_MiningSpecialist" or defName="IdeoRole_ProductionSpecialist" or defName="IdeoRole_ResearchSpecialist" or defName="IdeoRole_MeleeSpecialist"]/roleApparelRequirements</xpath>

              <value>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Apparel_Hauberk</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Apparel_Heavy_Hauberk</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Apparel_Brigandine</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Apparel_CoatOfPlates</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Apparel_Breast_Plate</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Apparel_FullPlate</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Apparel_Sackcloth</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Apparel_Leather_Tunic</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Apparel_Padded_Surcoat</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>Dankpyon_Apparel_Gambeson</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Apparel_Padded_Leather</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Apparel_Quiver</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_coif</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_ArmingCap</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_FullArmingCap</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_ZweihandersHat</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_PaddedNasalHelm</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_PaddedKettle</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_PaddedFlatTop</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_ChainCoif</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_ChainCoifClosed</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_ChainCoifFull</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_ChainNasalHelm</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_ChainKettle</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_Chain_FlatTop</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_ChainClosedFlatTop</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_VisoredKettleHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_ClosedBascinetHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_HounskullHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_SalletHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_Bascinet_KlappvisierHelmetClosed</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPoyn_Headgear_KlappvisierHelmetOpen</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_GreatHelm</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_CrusaderGreatHelm</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_RoyalGreatHelm</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_HeraldicGreatHelm</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                      <li>Neck</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>DankPyon_Headgear_Armet</li>
                    </requiredDefs>
                  </requirement>
                </li>
              </value>
            </li>
            <li Class="XmlExtensions.OptionalPatch">
              <modId>DevDesigner.RolesApparelUnlocked</modId>
              <key>toggle_memes_and_structures_roles</key>
              <defaultValue>false</defaultValue>

              <caseTrue>
                <Operation Class="PatchOperationFindMod">
                  <mods>
                    <li>Vanilla Ideology Expanded - Memes and Structures</li>
                  </mods>

                  <match Class="PatchOperationAdd">
                    <xpath>/Defs/PreceptDef[defName="VME_IdeoRole_Nurse" or defName="VME_IdeoRole_Commissar" or defName="VME_IdeoRole_FireKeeper" or defName="VME_IdeoRole_Fleshcrafter" or defName="VME_IdeoRole_InsectoidHerder" or defName="VME_IdeoRole_Mechacker" or defName="VME_IdeoRole_Merchant" or defName="VME_IdeoRole_PartyHost" or defName="VME_IdeoRole_LeaderSecond" or defName="VME_IdeoRole_LeaderThird" or defName="VME_IdeoRole_Patissier"]/roleApparelRequirements</xpath>

                    <value>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Apparel_Hauberk</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Apparel_Heavy_Hauberk</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Apparel_Brigandine</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Apparel_CoatOfPlates</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Apparel_Breast_Plate</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Apparel_FullPlate</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Apparel_Sackcloth</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Apparel_Leather_Tunic</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Apparel_Padded_Surcoat</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>Dankpyon_Apparel_Gambeson</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Apparel_Padded_Leather</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Apparel_Quiver</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_coif</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_ArmingCap</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_FullArmingCap</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_ZweihandersHat</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_PaddedNasalHelm</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_PaddedKettle</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_PaddedFlatTop</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_ChainCoif</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_ChainCoifClosed</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_ChainCoifFull</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_ChainNasalHelm</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_ChainKettle</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_Chain_FlatTop</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_ChainClosedFlatTop</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_VisoredKettleHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_ClosedBascinetHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_HounskullHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_SalletHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_Bascinet_KlappvisierHelmetClosed</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPoyn_Headgear_KlappvisierHelmetOpen</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_GreatHelm</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_CrusaderGreatHelm</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_RoyalGreatHelm</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_HeraldicGreatHelm</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                            <li>Neck</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>DankPyon_Headgear_Armet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                    </value>
                  </match>
                </Operation>
              </caseTrue>
            </li>
          </operations>
        </match>
      </Operation>
    </caseTrue>
  </Operation>

  <!-- T's Samurai Faction -->
  <Operation Class="XmlExtensions.OptionalPatch">
    <modId>DevDesigner.RolesApparelUnlocked</modId>
    <key>toggle_samurai_faction</key>
    <defaultValue>false</defaultValue>

    <caseTrue>
      <Operation Class="PatchOperationFindMod">
        <mods>
          <li>T's Samurai Faction</li>
        </mods>

        <match Class="PatchOperationSequence">
          <operations>
            <li Class="PatchOperationAdd">
              <xpath>/Defs/PreceptDef[defName="IdeoRole_Moralist" or defName="IdeoRole_Leader" or defName="IdeoRole_PlantSpecialist" or defName="IdeoRole_ShootingSpecialist" or defName="IdeoRole_MedicalSpecialist" or defName="IdeoRole_AnimalsSpecialist" or defName="IdeoRole_MiningSpecialist" or defName="IdeoRole_ProductionSpecialist" or defName="IdeoRole_ResearchSpecialist" or defName="IdeoRole_MeleeSpecialist"]/roleApparelRequirements</xpath>

              <value>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_Headband</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_NinjaMask</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_AshigaruHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_AshigaruArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_SamuraiHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_SamuraiArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_DaimyoHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>FullHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_OniHelmet</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_OniArmor</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>UpperHead</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_StrawHat</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_StrawCoat</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_SashimonoBanner</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Neck</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_Gi</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_Kimono</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                      <li>Legs</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_Yukata</li>
                    </requiredDefs>
                  </requirement>
                </li>
                <li>
                  <requirement>
                    <bodyPartGroupsMatchAny>
                      <li>Torso</li>
                      <li>Shoulders</li>
                      <li>Arms</li>
                    </bodyPartGroupsMatchAny>
                    <requiredDefs>
                      <li>TSFApparel_HaoriJacket</li>
                    </requiredDefs>
                  </requirement>
                </li>
              </value>
            </li>
            <li Class="XmlExtensions.OptionalPatch">
              <modId>DevDesigner.RolesApparelUnlocked</modId>
              <key>toggle_memes_and_structures_roles</key>
              <defaultValue>false</defaultValue>

              <caseTrue>
                <Operation Class="PatchOperationFindMod">
                  <mods>
                    <li>Vanilla Ideology Expanded - Memes and Structures</li>
                  </mods>

                  <match Class="PatchOperationAdd">
                    <xpath>/Defs/PreceptDef[defName="VME_IdeoRole_Nurse" or defName="VME_IdeoRole_Commissar" or defName="VME_IdeoRole_FireKeeper" or defName="VME_IdeoRole_Fleshcrafter" or defName="VME_IdeoRole_InsectoidHerder" or defName="VME_IdeoRole_Mechacker" or defName="VME_IdeoRole_Merchant" or defName="VME_IdeoRole_PartyHost" or defName="VME_IdeoRole_LeaderSecond" or defName="VME_IdeoRole_LeaderThird" or defName="VME_IdeoRole_Patissier"]/roleApparelRequirements</xpath>

                    <value>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_Headband</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_NinjaMask</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_AshigaruHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_AshigaruArmor</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_SamuraiHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_SamuraiArmor</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_DaimyoHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>FullHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_OniHelmet</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_OniArmor</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>UpperHead</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_StrawHat</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_StrawCoat</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_SashimonoBanner</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Neck</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_Gi</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_Kimono</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                            <li>Legs</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_Yukata</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                      <li>
                        <requirement>
                          <bodyPartGroupsMatchAny>
                            <li>Torso</li>
                            <li>Shoulders</li>
                            <li>Arms</li>
                          </bodyPartGroupsMatchAny>
                          <requiredDefs>
                            <li>TSFApparel_HaoriJacket</li>
                          </requiredDefs>
                        </requirement>
                      </li>
                    </value>
                  </match>
                </Operation>
              </caseTrue>
            </li>
          </operations>
        </match>
      </Operation>
    </caseTrue>
  </Operation>

  <!-- Add mod settings -->
  <Operation Class="XmlExtensions.CreateSettings">
    <modId>DevDesigner.RolesApparelUnlocked</modId>
    <label>Roles Apparel Unlocked</label>

    <settings>
      <li Class="XmlExtensions.Setting.Text">
        <text>All changes require restart to take effect</text>
        <font>Small</font>
        <tooltip>null</tooltip>
      </li>
      <li Class="XmlExtensions.Setting.GapLine">
          <spacing>12</spacing>
          <thickness>1</thickness>
      </li>
      <li Class="XmlExtensions.Setting.Checkbox">
        <key>toggle_royalty</key>
        <label>Royalty</label>
      </li>
      <li Class="XmlExtensions.Setting.Checkbox">
        <key>toggle_vikings</key>
        <label>Vanilla Factions Expanded - Vikings</label>
      </li>
      <li Class="XmlExtensions.Setting.Checkbox">
        <key>toggle_medieval</key>
        <label>Vanilla Factions Expanded - Medieval</label>
      </li>
      <li Class="XmlExtensions.Setting.Checkbox">
        <key>toggle_vae</key>
        <label>Vanilla Armour Expanded</label>
      </li>
      <li Class="XmlExtensions.Setting.Checkbox">
        <key>toggle_anima</key>
        <label>Anima Gear</label>
      </li>
      <li Class="XmlExtensions.Setting.Checkbox">
        <key>toggle_kenshi</key>
        <label>Kenshi Armory</label>
      </li>
      <li Class="XmlExtensions.Setting.Checkbox">
        <key>toggle_aea</key>
        <label>Ancient Eastern Armory</label>
      </li>
      <li Class="XmlExtensions.Setting.Checkbox">
        <key>toggle_medieval_overhaul</key>
        <label>Medieval Overhaul</label>
      </li>
      <li Class="XmlExtensions.Setting.Checkbox">
        <key>toggle_memes_and_structures_roles</key>
        <label>VME - Memes and Structures roles</label>
      </li>
      <li Class="XmlExtensions.Setting.Checkbox">
        <key>toggle_samurai_faction</key>
        <label>T's Samurai Faction</label>
      </li>
    </settings>
  </Operation>

</Patch>
