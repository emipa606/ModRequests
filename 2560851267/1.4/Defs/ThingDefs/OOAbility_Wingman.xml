<?xml version="1.0" encoding="utf-8" ?>
<Defs>

	<!--僚机灵能-->
<AbilityDef ParentName="PsycastBase">
    <defName>OOAbility_liaoji</defName>
    <label>StarWingman</label>
    <description>Summon four automatic shooting wingmen. For unknown reasons, they will fail after receiving some damage.</description>
    <level>4</level>
    <iconPath>Things/liaoji</iconPath>
	<targetRequired>False</targetRequired>
	<canUseAoeToGetTargets>False</canUseAoeToGetTargets>
	<!--showPsycastEffects>False</showPsycastEffects-->
	<warmupStartSound>Psycast_Neuroquake_CastStart</warmupStartSound>
    <warmupSound>Psycast_Neuroquake_CastLoop</warmupSound>
    <warmupPreEndSound>Psycast_Neuroquake_CastEnd</warmupPreEndSound>
    <warmupPreEndSoundSeconds>5</warmupPreEndSoundSeconds>
    <statBases>
      <Ability_EntropyGain>40</Ability_EntropyGain>
      <Ability_PsyfocusCost>0.02</Ability_PsyfocusCost>
      <Ability_Duration>60</Ability_Duration>
    </statBases>
    <verbProperties>
	  <warmupTime>3</warmupTime>
	  <warmupEffecter>Effect_OOAbility_liaoji</warmupEffecter>
	  <drawAimPie>False</drawAimPie>
      <requireLineOfSight>False</requireLineOfSight>
      <targetParams>
        <canTargetSelf>true</canTargetSelf>
        <canTargetPawns>false</canTargetPawns>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetAnimals>false</canTargetAnimals>
        <canTargetHumans>false</canTargetHumans>
        <canTargetMechs>false</canTargetMechs>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class = "CompProperties_AbilityGiveHediff">
        <compClass>CompAbilityEffect_GiveHediff</compClass>
        <hediffDef>OOHediff_shentiliaoji</hediffDef>
        <onlyBrain>True</onlyBrain>
		<onlyApplyToSelf>True</onlyApplyToSelf>
		<replaceExisting>True</replaceExisting>
        <psychic>True</psychic>
      </li>
	  <li Class="CompProperties_AbilityFleckOnTarget">
        <fleckDefs>
          <li>PsycastSkipInnerExit</li>
          <li>PsycastSkipOuterRingExit</li>
        </fleckDefs>
        <scale>1.55</scale>
        <sound>Psycast_Skip_Exit</sound>
        <preCastTicks>5</preCastTicks>
      </li>
    </comps>
  </AbilityDef>


<!--身体上的僚机-->

<HediffDef ParentName="PsycastHediffBase">
  <defName>OOHediff_shentiliaoji</defName>
  <label>StarWingman</label>
  <defaultLabelColor>(218,112,214)</defaultLabelColor>
  <labelNoun>a mounted minigun</labelNoun>
  <description>A minigun mounted to the torso.</description>
  <isBad>false</isBad>
   <comps>
    <li Class="MVCF.Comps.HediffCompProperties_ExtendedVerbGiver">
  
      <verbs>
				<!--僚机A-左上-->
       <li>
        <verbClass>Verb_Shoot</verbClass>
        <defaultProjectile>Bullet_OOHediff_shentiliaoji</defaultProjectile>
        <warmupTime>3</warmupTime>
	    <!--minRange>1</minRange-->
        <range>30.9</range>
        <ticksBetweenBurstShots>3</ticksBetweenBurstShots>
        <burstShotCount>4</burstShotCount>
        <soundCast>Shot_ChargeBlaster</soundCast>
        <soundCastTail>GunTail_Light</soundCastTail>
        <muzzleFlashScale>1</muzzleFlashScale>
		<label>StarWingmanA</label>
      </li>
				<!--僚机B-右上-->
	    <li>
        <verbClass>Verb_Shoot</verbClass>
        <defaultProjectile>Bullet_OOHediff_shentiliaoji</defaultProjectile>
        <warmupTime>3</warmupTime>
	    <!--minRange>1</minRange-->
        <range>30.9</range>
        <ticksBetweenBurstShots>3</ticksBetweenBurstShots>
        <burstShotCount>4</burstShotCount>
        <soundCast>Shot_ChargeBlaster</soundCast>
        <soundCastTail>GunTail_Light</soundCastTail>
        <muzzleFlashScale>1</muzzleFlashScale>
		<label>StarWingmanB</label>
      </li>
				<!--僚机C-左下-->
	  <li>
        <verbClass>Verb_Shoot</verbClass>
        <defaultProjectile>Bullet_OOHediff_shentiliaoji</defaultProjectile>
        <warmupTime>3</warmupTime>
	    <!--minRange>1</minRange-->
        <range>30.9</range>
        <ticksBetweenBurstShots>3</ticksBetweenBurstShots>
        <burstShotCount>4</burstShotCount>
        <soundCast>Shot_ChargeBlaster</soundCast>
        <soundCastTail>GunTail_Light</soundCastTail>
        <muzzleFlashScale>1</muzzleFlashScale>
		<label>StarWingmanC</label>
      </li>
				<!--僚机D-右下-->
	  <li>
        <verbClass>Verb_Shoot</verbClass>
        <defaultProjectile>Bullet_OOHediff_shentiliaoji</defaultProjectile>
        <warmupTime>3</warmupTime>
	    <!--minRange>1</minRange-->
        <range>30.9</range>
        <ticksBetweenBurstShots>3</ticksBetweenBurstShots>
        <burstShotCount>4</burstShotCount>
        <soundCast>Shot_ChargeBlaster</soundCast>
        <soundCastTail>GunTail_Light</soundCastTail>
        <muzzleFlashScale>1</muzzleFlashScale>
		<label>StarWingmanD</label>
      </li>
    </verbs>
	
      <verbProps>
	  <!--僚机A-左上-->
	    <li>
		  <label>StarWingmanA</label>
          <canBeToggled>true</canBeToggled>
		   <comps>
				<li Class="MVCF.VerbComps.VerbCompProperties_Turret">
				  <compClass>MVCF.VerbComps.VerbComp_Turret</compClass>
				  <humanAsDefault>true</humanAsDefault>
				  <graphic>
					<texPath>Things/liaoji</texPath>
					<graphicClass>Graphic_Single</graphicClass>
				  </graphic>
				  <specificPositions>
					  <li>
						<defName>Human</defName>
						<BodyType>Hulk</BodyType>
						<Default>(0,0)</Default>
						<Up>(-1,0)</Up>
						<Down>(1,0)</Down>
						<Right>(0,-1)</Right>
						<Left>(0,1)</Left>
					  </li>
					  <li>
						<defName>Human</defName>
						<BodyType>Fat</BodyType>
						<Default>(0,0)</Default>
						<Up>(-1,0)</Up>
						<Down>(1,0)</Down>
						<Right>(0,-1)</Right>
						<Left>(0,1)</Left>
					  </li>
					  <li>
						<defName>Human</defName>
						<BodyType>Male</BodyType>
						<Default>(0,0)</Default>
						<Up>(-1,0)</Up>
						<Down>(1,0)</Down>
						<Right>(0,-1)</Right>
						<Left>(0,1)</Left>
					  </li>
					  <li>
						<defName>Human</defName>
						<BodyType>Female</BodyType>
						<Default>(0,0)</Default>
						<Up>(-1,0)</Up>
						<Down>(1,0)</Down>
						<Right>(0,-1)</Right>
						<Left>(0,1)</Left>
					  </li>
					  <li>
						<defName>Human</defName>
						<BodyType>Thin</BodyType>
						<Default>(0,0)</Default>
						<Up>(-1,0)</Up>
						<Down>(1,0)</Down>
						<Right>(0,-1)</Right>
						<Left>(0,1)</Left>
					  </li>
					</specificPositions>   
				</li>
			</comps>
		</li>	
		
		<!--僚机B-右上-->
		<li>
		  <label>StarWingmanB</label>
          <canBeToggled>true</canBeToggled>
		   <comps>
				<li Class="MVCF.VerbComps.VerbCompProperties_Turret">
				  <compClass>MVCF.VerbComps.VerbComp_Turret</compClass>
				  <humanAsDefault>true</humanAsDefault>
				  <graphic>
					<texPath>Things/liaoji</texPath>
					<graphicClass>Graphic_Single</graphicClass>
				  </graphic>
				  <specificPositions>
					<li>
						<defName>Human</defName>
						<BodyType>Hulk</BodyType>
						<Default>(0,0)</Default>
						<Up>(1,0)</Up>
						<Down>(-1,0)</Down>
						<Right>(0,1)</Right>
						<Left>(0,-1)</Left>
					</li>
					<li>
						<defName>Human</defName>
						<BodyType>Fat</BodyType>
						<Default>(0,0)</Default>
						<Up>(1,0)</Up>
						<Down>(-1,0)</Down>
						<Right>(0,1)</Right>
						<Left>(0,-1)</Left>
					</li>
					<li>
						<defName>Human</defName>
						<BodyType>Male</BodyType>
						<Default>(0,0)</Default>
						<Up>(1,0)</Up>
						<Down>(-1,0)</Down>
						<Right>(0,1)</Right>
						<Left>(0,-1)</Left>
					</li>
					<li>
						<defName>Human</defName>
						<BodyType>Female</BodyType>
						<Default>(0,0)</Default>
						<Up>(1,0)</Up>
						<Down>(-1,0)</Down>
						<Right>(0,1)</Right>
						<Left>(0,-1)</Left>
					</li>
					<li>
						<defName>Human</defName>
						<BodyType>Thin</BodyType>
						<Default>(0,0)</Default>
						<Up>(1,0)</Up>
						<Down>(-1,0)</Down>
						<Right>(0,1)</Right>
						<Left>(0,-1)</Left>
					</li>
				   </specificPositions>
				</li>
			</comps>
        </li>
      
		<!--僚机C-左下-->
		<li>
		  <label>StarWingmanC</label>
          <canBeToggled>true</canBeToggled>
		   <comps>
			<li Class="MVCF.VerbComps.VerbCompProperties_Turret">
			 <compClass>MVCF.VerbComps.VerbComp_Turret</compClass>
			 <humanAsDefault>true</humanAsDefault>
			 <graphic>
				<texPath>Things/liaoji</texPath>
				<graphicClass>Graphic_Single</graphicClass>
			 </graphic>
			 <specificPositions>
				<li>
					<defName>Human</defName>
					<BodyType>Hulk</BodyType>
					<Default>(0,0)</Default>
					<Up>(0.75,0.75)</Up>
					<Down>(-0.75,-0.75)</Down>
					<Right>(0.75,-0.75)</Right>
					<Left>(-0.75,0.75)</Left>
				</li>
				<li>
					<defName>Human</defName>
					<BodyType>Fat</BodyType>
					<Default>(0,0)</Default>
					<Up>(0.75,0.75)</Up>
					<Down>(-0.75,-0.75)</Down>
					<Right>(0.75,-0.75)</Right>
					<Left>(-0.75,0.75)</Left>
				</li>
				<li>
					<defName>Human</defName>
					<BodyType>Male</BodyType>
					<Default>(0,0)</Default>
					<Up>(0.75,0.75)</Up>
					<Down>(-0.75,-0.75)</Down>
					<Right>(0.75,-0.75)</Right>
					<Left>(-0.75,0.75)</Left>
				</li>
				<li>
					<defName>Human</defName>
					<BodyType>Female</BodyType>
					<Default>(0,0)</Default>
					<Up>(0.75,0.75)</Up>
					<Down>(-0.75,-0.75)</Down>
					<Right>(0.75,-0.75)</Right>
					<Left>(-0.75,0.75)</Left>
				</li>
				<li>
					<defName>Human</defName>
					<BodyType>Thin</BodyType>
					<Default>(0,0)</Default>
					<Up>(0.75,0.75)</Up>
					<Down>(-0.75,-0.75)</Down>
					<Right>(0.75,-0.75)</Right>
					<Left>(-0.75,0.75)</Left>
				</li>
				
			  </specificPositions>
			</li>
		   </comps>
        </li>
		
		<!--僚机D-右下-->
		<li>
		  <label>StarWingmanD</label>
          <canBeToggled>true</canBeToggled>
		   <comps>
			<li Class="MVCF.VerbComps.VerbCompProperties_Turret">
			  <compClass>MVCF.VerbComps.VerbComp_Turret</compClass>
			  <humanAsDefault>true</humanAsDefault>
			  <graphic>
				<texPath>Things/liaoji</texPath>
				<graphicClass>Graphic_Single</graphicClass>
			  </graphic>
			  <specificPositions>
				  <li>
					<defName>Human</defName>
					<BodyType>Hulk</BodyType>
					<Default>(0,0)</Default>
					<Up>(-0.75,0.75)</Up>
					<Down>(0.75,-0.75)</Down>
					<Right>(0.75,0.75)</Right>
					<Left>(-0.75,-0.75)</Left>
				  </li>
				  <li>
					<defName>Human</defName>
					<BodyType>Fat</BodyType>
					<Default>(0,0)</Default>
					<Up>(-0.75,0.75)</Up>
					<Down>(0.75,-0.75)</Down>
					<Right>(0.75,0.75)</Right>
					<Left>(-0.75,-0.75)</Left>
				  </li>
				  <li>
					<defName>Human</defName>
					<BodyType>Male</BodyType>
					<Default>(0,0)</Default>
					<Up>(-0.75,0.75)</Up>
					<Down>(0.75,-0.75)</Down>
					<Right>(0.75,0.75)</Right>
					<Left>(-0.75,-0.75)</Left>
				  </li>
				  <li>
					<defName>Human</defName>
					<BodyType>Female</BodyType>
					<Default>(0,0)</Default>
					<Up>(-0.75,0.75)</Up>
					<Down>(0.75,-0.75)</Down>
					<Right>(0.75,0.75)</Right>
					<Left>(-0.75,-0.75)</Left>
				  </li>
				  <li>
					<defName>Human</defName>
					<BodyType>Thin</BodyType>
					<Default>(0,0)</Default>
					<Up>(-0.75,0.75)</Up>
					<Down>(0.75,-0.75)</Down>
					<Right>(0.75,0.75)</Right>
					<Left>(-0.75,-0.75)</Left>
				  </li>
			   </specificPositions>
			</li>
		   </comps>
        </li>
	</verbProps>
    </li>
  </comps>
</HediffDef>

	<!--僚机子弹-->
	<ThingDef ParentName="BaseBullet">
    <defName>Bullet_OOHediff_shentiliaoji</defName>
    <label>Little Star</label>
    <graphicData>
      <texPath>Things/Fleck_OOAbility_Star</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <shaderType>TransparentPostLight</shaderType>
	  <drawSize>(0.7,0.7)</drawSize>
    </graphicData>
    <projectile>
      <damageDef>OOStarAbilityArrow</damageDef>
      <damageAmountBase>5</damageAmountBase>
	  <armorPenetrationBase>0.40</armorPenetrationBase>
      <speed>30</speed>
    </projectile>
  </ThingDef>
  
	<!--僚机子弹伤害-->
  <DamageDef ParentName="Arrow">
    <defName>OOStarAbilityArrow</defName>
	<label>ArrowS</label>
    <buildingDamageFactor>1</buildingDamageFactor>
    <plantDamageFactor>1</plantDamageFactor>
	<damageEffecter>Effecter_OOStarAbilityArrow</damageEffecter>
    </DamageDef>
		
 <!--子弹命中的星星-->
	<EffecterDef>
    <defName>Effecter_OOStarAbilityArrow</defName>
    <children>
	  <li>
        <subEffecterClass>SubEffecter_SprayerTriggered</subEffecterClass>  
        <moteDef>Mote_Effect_OOStarAbilityArrow</moteDef>
		<spawnLocType>RandomCellOnTarget</spawnLocType>
		<burstCount>1~1</burstCount>
        <scale>0.25~0.75</scale>
		<absoluteAngle>true</absoluteAngle>
        <angle>-90~90</angle>
        <speed>2</speed>
      </li>
    </children>
  </EffecterDef>

   <ThingDef ParentName="MoteBase">
    <defName>Mote_Effect_OOStarAbilityArrow</defName>
    <graphicData>
      <texPath>Things/OOStarAbilityArrow_ministar</texPath>
      <shaderType>MoteGlow</shaderType>
    </graphicData>
    <altitudeLayer>MoteOverhead</altitudeLayer>
    <drawOffscreen>true</drawOffscreen>
    <mote>
      <fadeInTime>0.1</fadeInTime>
      <solidTime>0.3</solidTime>
      <fadeOutTime>1.0</fadeOutTime>
    </mote>
  </ThingDef>
  

	<!--僚机召唤-->
<EffecterDef>
    <defName>Effect_OOAbility_liaoji</defName>
	<offsetTowardsTarget>0.75</offsetTowardsTarget>
    <children> 
	
	   <li>
        <subEffecterClass>SubEffecter_SprayerContinuous</subEffecterClass>
		<spawnLocType>OnSource</spawnLocType>
        <fleckDef>Fleck_OOliaoji_hexin</fleckDef>
        <scale>1</scale>
		<ticksBetweenMotes>60</ticksBetweenMotes>
      </li>
	  <li>
        <subEffecterClass>SubEffecter_SprayerContinuous</subEffecterClass>
		<spawnLocType>OnSource</spawnLocType>
        <fleckDef>Fleck_OOliaoji_starsise</fleckDef>
        <scale>1~2</scale>
		<ticksBetweenMotes>10</ticksBetweenMotes>
      </li>
	  <li>
        <subEffecterClass>SubEffecter_SprayerContinuous</subEffecterClass>
        <fleckDef>Fleck_OOliaoji_starsise</fleckDef>
        <scale>2.5~3</scale>
		<spawnLocType>OnSource</spawnLocType>
		<ticksBetweenMotes>30</ticksBetweenMotes>
        <rotationRate>-240</rotationRate>
		<absoluteAngle>true</absoluteAngle>
		<fleckUsesAngleForVelocity>true</fleckUsesAngleForVelocity>
      </li>
    </children>
  </EffecterDef>
 
	<!--中央的星星-->
  <FleckDef ParentName="FleckBase">
    <defName>Fleck_OOliaoji_hexin</defName>
    <graphicData>
     <texPath>Things/OOliaoji_hexin</texPath> 
     <shaderType>MoteGlow</shaderType>
     <drawSize>(0.7,0.7)</drawSize>
    </graphicData>
	  <altitudeLayer>MoteOverhead</altitudeLayer>
      <fadeOutTime>0.8</fadeOutTime>
      <growthRate>2</growthRate>
  </FleckDef>

	<!--四色星星-聚拢-旋转-->
 <FleckDef ParentName="FleckBase_Thrown">
    <defName>Fleck_OOliaoji_starsise</defName>
    <graphicData>
      <texPath>Things/siseStar</texPath>
      <shaderType>MoteGlow</shaderType>
    </graphicData>
    <altitudeLayer>MoteOverhead</altitudeLayer>
      <fadeOutTime>1.5</fadeOutTime>
      <growthRate>-3</growthRate>
  </FleckDef>
</Defs>