<?xml version="1.0" encoding="utf-8" ?>
<Defs>
 <!--===============框架功能开启==============-->
  <MVCF.ModDef>
	<defName>OOAbility</defName>
	<label>OOAbility</label>
	<description>OOAbility</description>
	
	<ActivateFeatures>		
			<li>Drawing</li>
			<li>ExtraEquipmentVerbs</li>	
            <li>IndependentFire</li>
            <li>IntegratedToggle</li>
			<li>RangedAnimals</li>
			<li>HediffVerbs</li>
	</ActivateFeatures>
	
   </MVCF.ModDef>
  
  <!--===============武器归类==============-->
    <ThingDef Name="OOWeapon_Bladelink" ParentName="BaseWeapon" Abstract="True">
    <techLevel>Ultra</techLevel>
    <tradeNeverStack>true</tradeNeverStack>
    <relicChance>3</relicChance>
    <weaponTags>
      <li>OOWeapon_Bladelink</li>
    </weaponTags>
    <weaponClasses>
      <li>Ultratech</li>
    </weaponClasses>
	<tradeTags>
      <li>PsychicWeapon</li>
    </tradeTags>
    <comps>
      <li>
        <compClass>CompQuality</compClass>
      </li>
      <li Class="CompProperties_BladelinkWeapon">
        <biocodeOnEquip>true</biocodeOnEquip>
      </li>
      <li Class="CompProperties_GeneratedName">
        <nameMaker>NamerWeaponBladelink</nameMaker>
      </li>
    </comps>
    <smeltable>true</smeltable>
    <burnableByRecipe>true</burnableByRecipe>
    <thingCategories>
      <li>WeaponsMeleeBladelink</li>
    </thingCategories>
    <thingSetMakerTags>
      <li>RewardStandardMidFreq</li>
    </thingSetMakerTags>
	
	<recipeMaker>
      <unfinishedThingDef>UnfinishedStarWand</unfinishedThingDef>
      <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
      <workSkill>Artistic</workSkill>
      <effectWorking>Sculpt</effectWorking>
	  <soundWorking>Recipe_Sculpt</soundWorking>
      <recipeUsers>
        <li>TableSculpting</li>
      </recipeUsers>
      <useIngredientsForColor>false</useIngredientsForColor>
      <skillRequirements>
        <Artistic>10</Artistic>
      </skillRequirements>
    </recipeMaker>
	
  </ThingDef>
  
    <!--===============重铸星星杖==============-->
  <RecipeDef>
    <defName>Recast_OOWeapon_StarWand</defName>
    <label>Recast the star wand</label>
    <description>Recast the star wand.</description>
    <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
	<workSkill>Artistic</workSkill>
    <jobString>The star wand is being recast.</jobString>
    <effectWorking>Sculpt</effectWorking>
    <soundWorking>Recipe_Sculpt</soundWorking>
    <workAmount>120000</workAmount>
    <unfinishedThingDef>UnfinishedStarWand</unfinishedThingDef>
	 <recipeUsers>
        <li>TableSculpting</li>
     </recipeUsers>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>OOWeapon_StarWand</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <products>
      <OOWeapon_StarWand>1</OOWeapon_StarWand>
    </products>
      <skillRequirements>
        <Artistic>10</Artistic>
      </skillRequirements>
  </RecipeDef>
    <!--===============未完成的星星杖==============-->
  <ThingDef ParentName="UnfinishedBase">
    <defName>UnfinishedStarWand</defName>
    <label>unfinished StarWand</label>
    <description>unfinished Star Nucleus.</description>
	<useHitPoints>false</useHitPoints>
    <graphicData>
      <texPath>Things/StarWand</texPath>
      <graphicClass>Graphic_Single</graphicClass>
	  <color>(88,87,86)</color>
      <drawSize>(1,1)</drawSize>
    </graphicData>
	 <statBases>
	  <DeteriorationRate>0</DeteriorationRate>
      <Beauty>10</Beauty>
      <Mass>25</Mass>
      <Flammability>0</Flammability>
    </statBases>
	<stuffCategories Inherit="false" />
  </ThingDef>
  
  <!--===============星星杖==============-->
  
<ThingDef ParentName="OOWeapon_Bladelink">
    <defName>OOWeapon_StarWand</defName>
    <label>StarWand</label>
    <description>A star staff can shoot stars or beams of light. Of course, it can also be used to knock the enemy.</description>
    <graphicData>
      <texPath>Things/StarWand</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <uiIconScale>1.2</uiIconScale>
    <techLevel>Medieval</techLevel>
    <statBases>
	  <MarketValue>4000</MarketValue>
      <WorkToMake>60000</WorkToMake>
      <Mass>1.25</Mass>
	  <Beauty>10</Beauty>
      <AccuracyTouch>0.6</AccuracyTouch>
      <AccuracyShort>0.7</AccuracyShort>
      <AccuracyMedium>0.7</AccuracyMedium>
      <AccuracyLong>1</AccuracyLong>
      <RangedWeapon_Cooldown>2.00</RangedWeapon_Cooldown>
    </statBases>
	<costList>
      <Gold>15</Gold>
	  <Jade>150</Jade>
      <MeleeWeapon_PsyfocusStaff>1</MeleeWeapon_PsyfocusStaff>
    </costList>
	<equippedStatOffsets>
      <PsychicSensitivityOffset>0.50</PsychicSensitivityOffset>
      <PsychicEntropyRecoveryRate>0.083</PsychicEntropyRecoveryRate>
    </equippedStatOffsets>
    <!--equippedAngleOffset>-65</equippedAngleOffset-->
	<verbs>
	
	  <li>
        <verbClass>Verb_Shoot</verbClass>
		<hasStandardCommand>true</hasStandardCommand>
        <defaultProjectile>Bullet_OOHediff_shentiliaoji</defaultProjectile>
        <warmupTime>1</warmupTime>
		<warmupEffecter>Effect_OOAbility_liaoji</warmupEffecter>
	    <!--minRange>1</minRange-->
        <range>30.9</range>
        <ticksBetweenBurstShots>3</ticksBetweenBurstShots>
        <burstShotCount>6</burstShotCount>
        <soundCast>Shot_ChargeBlaster</soundCast>
        <soundCastTail>GunTail_Light</soundCastTail>
        <muzzleFlashScale>9</muzzleFlashScale>
		<label>Stars</label>
      </li>
	  
	  <li>
        <verbClass>Verb_Shoot</verbClass>
		<hasStandardCommand>true</hasStandardCommand>
		<forceNormalTimeSpeed>false</forceNormalTimeSpeed>
        <defaultProjectile>Bullet_OOStarWand_Spark</defaultProjectile>
		<onlyManualCast>True</onlyManualCast>
        <warmupTime>8</warmupTime>
		<warmupEffecter>Effect_OOAbility_liaoji</warmupEffecter>
	    <minRange>30.9</minRange>
        <range>49.9</range>
        <soundCast>PsychicShockLanceCast</soundCast>
        <soundCastTail>GunTail_Heavy</soundCastTail>
        <muzzleFlashScale>18</muzzleFlashScale>
		<targetParams>
			<canTargetLocations>True</canTargetLocations>
        </targetParams>
		<rangedFireRulepack>Combat_RangedFire_Thrown</rangedFireRulepack>
		<label>Spark</label>
      </li>
    </verbs> 	  
		  
    <tools>
	  <li>
        <label>handle</label>
        <capacities>
          <li>Poke</li>
        </capacities>
        <power>10</power>
        <cooldownTime>2</cooldownTime>
		<extraMeleeDamages>
          <li>
            <def>OOBlunt</def>
            <amount>5</amount>
			<armorPenetration>2</armorPenetration>
          </li>
        </extraMeleeDamages>
      </li>
      <li>
        <label>head</label>
        <labelUsedInLogging>false</labelUsedInLogging>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <power>18</power>
        <cooldownTime>2</cooldownTime>
		<extraMeleeDamages>
          <li>
            <def>OOBlunt</def>
            <amount>5</amount>
			<armorPenetration>2</armorPenetration>
          </li>
        </extraMeleeDamages>
      </li>
    </tools>
  </ThingDef>

 <!-- 附加近战攻击 -->
	 
<DamageDef ParentName="BluntBase">
    <defName>OOBlunt</defName>
    <label>BluntS</label>
    <damageEffecter>Effecter_OOBlunt</damageEffecter>
  </DamageDef>
   <!-- 附加近战攻击的星星 -->
  <EffecterDef>
    <defName>Effecter_OOBlunt</defName>
    <children>
      <li>
        <subEffecterClass>SubEffecter_SprayerTriggered</subEffecterClass>
        <fleckDef>Fleck_OOStarShield_BlockedProjectile</fleckDef>
        <burstCount>6</burstCount>
		<positionRadius>1</positionRadius>
        <scale>0.3~1</scale>
        <spawnLocType>OnSource</spawnLocType>
      </li>
    </children>
  </EffecterDef>
  
  
	<!-- 直线弹头 -->
	<VFECore.ExpandableProjectileDef ParentName="BaseBullet">
		<defName>Bullet_OOStarWand_Spark</defName>
		<label>Bullet_OOStarWand_Spark</label>
		<thingClass>VFECore.FlamethrowProjectile</thingClass>     <!--爆炸和火焰弹头-->
		<graphicData>
			<texPath>Things/daoxian</texPath>                   <!--子弹纹理-->
			<texPathFadeOut>Things/mopao</texPathFadeOut>     <!--弹丸淡出纹理-->
			<shaderType>MoteGlow</shaderType>
            <!--color>(247,061,255)</color-->		
		</graphicData>
		<projectile>
			<damageDef>OOStarAbilityArrow</damageDef>
			<speed>150</speed>
			<damageAmountBase>10</damageAmountBase>
			<explosionRadius>0.1</explosionRadius>
			<ai_IsIncendiary>true</ai_IsIncendiary>
			<flyOverhead>true</flyOverhead>
			<soundHitThickRoof>PsychicShockLanceCast</soundHitThickRoof>
		</projectile>
		<drawOffscreen>true</drawOffscreen>                         <!--必要-->
		<lifeTimeDuration>90</lifeTimeDuration>                    <!--总生命时间，计数器计算每个tickFrameRate属性-->
		<widthScaleFactor>0.5</widthScaleFactor>                    <!--缩放宽度-->
		<heightScaleFactor>1</heightScaleFactor>                    <!--缩放高度-->
		<startingPositionOffset>(0, 0, -1)</startingPositionOffset>    <!--定位起始位置-->
		<totalSizeScale>1.0</totalSizeScale>                         <!--将缩放子弹大小，必要-->
		<tickFrameRate>3</tickFrameRate>                           <!--每刻更改纹理的速度-->
		<finalTickFrameRate>3</finalTickFrameRate>                 <!--每刻改变淡出纹理的速度-->
		<tickDamageRate>60</tickDamageRate>							<!--确定通过哪个刻造成伤害-->
		<dealsDamageOnce>true</dealsDamageOnce>
		<minDistanceToAffect>1</minDistanceToAffect>                <!--可以设置为忽略附近受影响的单元格（如果你不需要燃烧沙袋或其他建筑物，很有用）-->
	</VFECore.ExpandableProjectileDef>

</Defs>