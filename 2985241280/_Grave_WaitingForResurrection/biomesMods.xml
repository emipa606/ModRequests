<?xml version="1.0" encoding="utf-8" ?>
<Patch>
    <Operation Class="PatchOperationFindMod">
	    <mods>
            <li>Biomes! Core</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- Terrains -->
				<li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
                        <TerrainDef ParentName="BiomesCore_FloatingGarden">
		                    <defName>PGI_BMT_FloatinggardenPGI</defName>
		                    <label>perfect chinampa</label>
		                    <costList Inherit="false"/>
                            <fertility>28</fertility>
	                    </TerrainDef>
                    </value>
				</li>
            </operations>
	    </match>
    </Operation>

    <Operation Class="PatchOperationFindMod">
	    <mods>
            <li>Biomes! Caverns</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- Buffers -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
    					<ThingDef ParentName="PGI_PHediffGiverBadBase">
    					    <defName>PGI_Buffer_BMT_PurpleLung</defName>
    					    <label>perfect lung terminator</label>
    					    <description>a facility harms your lungs with microscopic crystal pieces.</description>
						    <comps>
						    	<li Class="VFECore.CompProperties_HediffGiver">
    					            <hediffDef>BMT_PurpleLung</hediffDef>
						    		<radius>14.9</radius>
						    		<severityIncrease>0.4</severityIncrease>
    					            <tickRate>60</tickRate>
						    	</li>
						    </comps>
    					</ThingDef>
                    </value>
				</li>
                <!-- Addons -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ItemProcessor.ItemAcceptedDef[defName="PGI_PerfectCooker_BillAccept"]/items</xpath>
                    <value>
                        <li>BMT_MushroomMust</li>
                        <li>BMT_GleamcapSalve</li>
                        <li>BMT_JadeGlints</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
                        <ItemProcessor.CombinationDef ParentName="PGI_ItemProcess_NoQualityBase">
		                    <defName>PGI_PerfectCookerBill_BMT_MushroomMust</defName>
		                    <items>
		                    	<li>BMT_MushroomMust</li>
		                    </items>
		                    <amount>
		                    	<li>5</li>
		                    </amount>
		                    <result>BMT_MushroomWine</result>
		                    <yield>10</yield>
	                    </ItemProcessor.CombinationDef>
                        <ItemProcessor.CombinationDef ParentName="PGI_ItemProcess_NoQualityBase">
		                    <defName>PGI_PerfectCookerBill_BMT_GleamcapSalve</defName>
		                    <items>
		                    	<li>BMT_GleamcapSalve</li>
		                    </items>
		                    <amount>
		                    	<li>25</li>
		                    </amount>
		                    <result>BMT_Gleamcapsules</result>
		                    <yield>25</yield>
	                    </ItemProcessor.CombinationDef>
                        <ItemProcessor.CombinationDef ParentName="PGI_ItemProcess_NoQualityBase">
		                    <defName>PGI_PerfectCookerBill_BMT_JadeGlints</defName>
		                    <items>
		                    	<li>BMT_JadeGlints</li>
		                    </items>
		                    <amount>
		                    	<li>25</li>
		                    </amount>
		                    <result>BMT_Glitter</result>
		                    <yield>25</yield>
	                    </ItemProcessor.CombinationDef>
                    </value>
                </li>
                <!-- Modifications -->
				<li Class="PatchOperationReplace">
                    <xpath>Defs/TerrainDef[defName="BMT_FungalGardenGravel" or defName="BMT_MycelialSoil"]/fertility</xpath>
                    <value>
                        <fertility>28</fertility>
                    </value>
				</li>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/TerrainDef[defName="BMT_FungalGardenGravel" or defName="BMT_MycelialSoil"]/costList</xpath>
                    <value>
                        <costList/>
                    </value>
                </li>
            </operations>
	    </match>
    </Operation>
    
</Patch>