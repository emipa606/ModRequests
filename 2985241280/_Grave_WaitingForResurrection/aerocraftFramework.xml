<?xml version="1.0" encoding="utf-8" ?>
<Patch>

    <Operation Class="PatchOperationFindMod">
	    <mods>
            <li>Aerocraft Framework</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- Aerocraft -->
				<li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
                        <ThingDef ParentName="MYDE_AerocraftFramework_XmlParent">
                            <defName>PGI_Aerocraft</defName>
                            <label>perfect aerocraft</label>
                            <description>An aerocraft with great power. Keep away from its target.</description>
                            <thingClass>MYDE_AerocraftFramework.Building_Aerocraft_AsBaseThing</thingClass>
                            <uiIconPath>AerocraftFramework/pgiaerobase</uiIconPath>
                            <graphicData>
                                <texPath>AerocraftFramework/pgiaerobase</texPath>
                                <drawSize>(1,1)</drawSize>
                            </graphicData>
                            <useHitPoints>false</useHitPoints>
                            <statBases>
                                <MaxHitPoints>9999999</MaxHitPoints>
                                <WorkToBuild>100</WorkToBuild>
                                <Mass>0</Mass>
                                <Beauty>114514</Beauty>
                                <ShootingAccuracyTurret>1</ShootingAccuracyTurret>
                            </statBases>
                            <costList>
                                <PGI_PerfectlyGenericItem>1</PGI_PerfectlyGenericItem>
                            </costList>
                            <terrainAffordanceNeeded Inherit="false"/>
                            <constructionSkillPrerequisite>0</constructionSkillPrerequisite>
                            <minifiedDef>MYDE_AerocraftFramework_MinifiedThing</minifiedDef>
                            <thingCategories>
                                <li>MYDE_AerocraftFramework_Root</li>
                            </thingCategories>
                            <designationCategory>PGI_MainCategory</designationCategory>
                            <size>(1,1)</size>
                            <placeWorkers Inherit="false">
                                <li>MYDE_AerocraftFramework.PlaceWorker_DrawAerocraft</li>
                            </placeWorkers>
                            <comps>
                                <li Class="CompProperties_Refuelable">
                                    <outOfFuelMessage>Needs Fuel</outOfFuelMessage>
                                    <fuelFilter>
                                        <thingDefs>
                                            <li>PGI_PerfectlyGenericItem</li>
                                        </thingDefs>
                                    </fuelFilter>
                                    <fuelCapacity>1000000</fuelCapacity>
                                    <fuelMultiplier>1000000</fuelMultiplier>
                                    <initialFuelPercent>1</initialFuelPercent>
                                    <autoRefuelPercent>0.01</autoRefuelPercent>
                                    <showFuelGizmo>true</showFuelGizmo>
                                    <minimumFueledThreshold>1</minimumFueledThreshold>
                                    <consumeFuelOnlyWhenUsed>true</consumeFuelOnlyWhenUsed>
                                    <targetFuelLevelConfigurable>true</targetFuelLevelConfigurable>
                                    <initialConfigurableTargetFuelLevel>1000000</initialConfigurableTargetFuelLevel>
                                </li>
                                <li Class="MYDE_AerocraftFramework.CompProperties_Base_Thing">
                                    <If_Draw_Base>True</If_Draw_Base>
                                    <Draw_ScaleIncreaseFactor_WhenFlying>0.2</Draw_ScaleIncreaseFactor_WhenFlying>
                                    <Draw_Base_TexturePath>AerocraftFramework/pgiaerobase</Draw_Base_TexturePath>
                                    <Draw_Base_Scale>1.6</Draw_Base_Scale>
                                    <Draw_Base_ExtraAltitudeLayerNum>0.4</Draw_Base_ExtraAltitudeLayerNum>
                                    <If_NeedDrawAllShadow>True</If_NeedDrawAllShadow>
                                    <If_DrawShadow_Base>true</If_DrawShadow_Base>
                                    <Draw_Shadow_Base_Scale>1.2</Draw_Shadow_Base_Scale>
                                    <Draw_Shadow_Base_HeightFactor>1.2</Draw_Shadow_Base_HeightFactor>
                                    <Draw_Shadow_Base_ExtraAltitudeLayerNum>-0.5</Draw_Shadow_Base_ExtraAltitudeLayerNum>
                                    <Draw_Shadow_Base_Transparency>0.5</Draw_Shadow_Base_Transparency>
                                </li>
                                <li Class="MYDE_AerocraftFramework.CompProperties_Base_Weapon">
                                    <WeaponDef>PGI_Aerocraft_BaseGun</WeaponDef>
                                    <If_Draw_Gun>false</If_Draw_Gun>
                                </li>
                                <li Class="MYDE_AerocraftFramework.CompProperties_MoveToTargetAndHover">
                                    <Check_CollideMoveRangeMax>5</Check_CollideMoveRangeMax>
                                    <Move_WarmUpTickMax>0</Move_WarmUpTickMax>
                                    <If_NeedTurnWhenMoving>False</If_NeedTurnWhenMoving>
                                    <If_NeedGlidingWhenTakeOff>False</If_NeedGlidingWhenTakeOff>
                                    <MoveSpeed_Max>0.5</MoveSpeed_Max>
                                    <MoveSpeed_Turning>0.5</MoveSpeed_Turning>
                                    <Default_HoverSet>False</Default_HoverSet>
                                    <Hover_Icon_On_Label>Hover: On</Hover_Icon_On_Label>
                                    <Hover_Icon_Off_Label>Hover: Off</Hover_Icon_Off_Label>
                                    <Hover_Icon_Description>Whether to turn on or off the hovering of the aerocraft</Hover_Icon_Description>
                                    <Hover_Icon_On_IconPath>AerocraftFramework/Icon/Hover</Hover_Icon_On_IconPath>
                                    <Hover_Icon_Off_IconPath>AerocraftFramework/Icon/False</Hover_Icon_Off_IconPath>
                                    <TakeOffAndLanding_Icon_On_Label>Take off</TakeOffAndLanding_Icon_On_Label>
                                    <TakeOffAndLanding_Icon_Off_Label>Landing</TakeOffAndLanding_Icon_Off_Label>
                                    <TakeOffAndLanding_Icon_Description>Switching between takeoff and landing.</TakeOffAndLanding_Icon_Description>
                                    <TakeOffAndLanding_Icon_On_IconPath>AerocraftFramework/Icon/Up</TakeOffAndLanding_Icon_On_IconPath>
                                    <TakeOffAndLanding_Icon_Off_IconPath>AerocraftFramework/Icon/Down</TakeOffAndLanding_Icon_Off_IconPath>
                                    <AngleChangePerTick_Hover>15</AngleChangePerTick_Hover>
                                    <AngleChangePerTick_Turning>15</AngleChangePerTick_Turning>
                                    <FuelConsumePerTick>0.016</FuelConsumePerTick>
                                </li>
                                <li Class="CompProperties_ProjectileInterceptor">
                                    <radius>5</radius>
                                    <interceptGroundProjectiles>true</interceptGroundProjectiles>
                                    <color>(36,120,36)</color>
                                    <activeSound>Broadshield_Ambience</activeSound>
                                    <hitPoints>999999</hitPoints>
                                    <hitPointsRestoreInstantlyAfterCharge>true</hitPointsRestoreInstantlyAfterCharge>
                                    <chargeDurationTicks>0</chargeDurationTicks>
                                    <interceptNonHostileProjectiles>true</interceptNonHostileProjectiles>
                                    <interceptOutgoingProjectiles>false</interceptOutgoingProjectiles>
                                    <idlePulseSpeed>3</idlePulseSpeed>
                                    <minIdleAlpha>0.05</minIdleAlpha>
                                    <disarmedByEmpForTicks>600</disarmedByEmpForTicks>
                                    <drawWithNoSelection>True</drawWithNoSelection>
                                </li>
                                <li Class="MYDE_AerocraftFramework.CompProperties_ShowBuildingShieldGizmos"></li>
                                <li Class="MYDE_AerocraftFramework.CompProperties_AutoFindTarget">
                                    <Default_FindTargetSet>True</Default_FindTargetSet>
                                    <FindTarget_Icon_On_Label>enemyfinding: On</FindTarget_Icon_On_Label>
                                    <FindTarget_Icon_Off_Label>enemyfinding: Off</FindTarget_Icon_Off_Label>
                                    <FindTarget_Icon_Description>Automatically search and destroy enemies.</FindTarget_Icon_Description>
                                    <FindTarget_Icon_On_IconPath>AerocraftFramework/Icon/Hover</FindTarget_Icon_On_IconPath>
                                    <FindTarget_Icon_Off_IconPath>AerocraftFramework/Icon/False</FindTarget_Icon_Off_IconPath>
                                    <FindTargetTickMax>1200</FindTargetTickMax>
                                </li>
                                <li Class="MYDE_AerocraftFramework.CompProperties_CarryPawn">
                                    <CarryPawnNumMax>999</CarryPawnNumMax>
                                    <If_ChangeWeaponByPawnWeaponWhenCarry>false</If_ChangeWeaponByPawnWeaponWhenCarry>
                                    <If_ShowFastLordGizmos>True</If_ShowFastLordGizmos>
                                    <Gizmos_CarryPawn_Label>Fast loading</Gizmos_CarryPawn_Label>
                                    <Gizmos_CarryPawn_Description>Fast loading colonizers within a radius of 5.</Gizmos_CarryPawn_Description>
                                    <Gizmos_CarryPawn_IconPath>AerocraftFramework/RotorCraft_FourPropeller/CarryPawn</Gizmos_CarryPawn_IconPath>
                                    <CarryPawn_MaxRange>5</CarryPawn_MaxRange>
                                </li>
                                <li Class="CompProperties_Transporter">
                                  <restEffectiveness>114514</restEffectiveness>
                                  <max1PerGroup>true</max1PerGroup>
                                  <massCapacity>6000000000</massCapacity>
                                </li>
                                <li Class="MYDE_AerocraftFramework.CompProperties_CanCrossMap">
                                  <LeavingThingDef>PGI_Aerocraft_Skyfalller</LeavingThingDef>
                                  <WorldObjectDef>PGI_Aerocraft_WorldObject</WorldObjectDef>
                                  <TravelSpeed>0.1</TravelSpeed>
                                  <FuelConsumeBase>1</FuelConsumeBase>
                                  <CrossMap_Label>Cross Map</CrossMap_Label>
                                  <CrossMap_Description>Cross map, no open space can be selected as the target location. To avoid situations where it is impossible to return, please ensure that there is sufficient fuel for round-trip travel</CrossMap_Description>
                                  <CrossMap_IconPath>AerocraftFramework/Icon/CrossMap</CrossMap_IconPath>
                                  <DefaultThing_ToRefuel>PGI_PerfectlyGenericItem</DefaultThing_ToRefuel>
                                </li>
                            </comps>
                        </ThingDef>
                 
                        <ThingDef ParentName="MYDE_AerocraftFramework_WeaponBase_XmlParent">
                            <defName>PGI_Aerocraft_BaseGun</defName>
                            <label>perfect aeroshock</label>
                            <description>Basic weapon of perfect aerocraft</description>
                            <graphicData>
                                <texPath>Building/Various/transparent</texPath>
                            </graphicData>
                            <statBases>
                                <AccuracyTouch>1</AccuracyTouch>
                                <AccuracyShort>1</AccuracyShort>
                                <AccuracyMedium>1</AccuracyMedium>
                                <AccuracyLong>1</AccuracyLong>
                                <RangedWeapon_Cooldown>0</RangedWeapon_Cooldown>
                                <Mass>0</Mass>
                            </statBases>
                            <verbs>
                                <li>
                                    <verbClass>Verb_Shoot</verbClass>
                                    <defaultProjectile>PGI_Aerocraft_BaseGun_Bullet</defaultProjectile>
                                    <warmupTime>0</warmupTime>
                                    <range>99.9</range>
                                    <ticksBetweenBurstShots>0</ticksBetweenBurstShots>
                                    <burstShotCount>30</burstShotCount>
                                    <soundCast>Interact_BeatFire</soundCast>
                                    <soundCastTail>GunTail_Light</soundCastTail>
                                    <muzzleFlashScale>9</muzzleFlashScale>
                                    <consumeFuelPerShot>0</consumeFuelPerShot>
                                    <canGoWild>false</canGoWild>
                                    <requireLineOfSight>false</requireLineOfSight>
                                    <forcedMissRadius>0.9</forcedMissRadius>
                                </li>
                            </verbs>
                            <costList></costList>
                            <smeltable>false</smeltable>
                        </ThingDef>
                        <ThingDef ParentName="BaseBullet">
                            <defName>PGI_Aerocraft_BaseGun_Bullet</defName>
                            <label>perfect aeroshock</label>
                            <graphicData>
                                <texPath>Building/Various/transparent</texPath>
                                <graphicClass>Graphic_Single</graphicClass>
                                <shaderType>TransparentPostLight</shaderType>
                            </graphicData>
                            <thingClass>Projectile_Explosive</thingClass>
                            <projectile>
                                <damageDef>PGI_PDamage</damageDef>
                                <damageAmountBase>114514</damageAmountBase>
                                <stoppingPower>114514</stoppingPower>
                                <armorPenetrationBase>114514</armorPenetrationBase>
                                <explosionRadius>4.9</explosionRadius>
                                <speed>2000</speed>
                                <flyOverhead>true</flyOverhead>
                                <soundHitThickRoof>Artillery_HitThickRoof</soundHitThickRoof>
                                <soundExplode>Explosion_GiantBomb</soundExplode>
                                <soundImpactAnticipate>MortarRound_PreImpact</soundImpactAnticipate>
                                <soundAmbient>MortarRound_Ambient</soundAmbient>
                            </projectile>
                        </ThingDef>

                        <ThingDef ParentName="SkyfallerBase">
                            <defName>PGI_Aerocraft_Skyfalller</defName>
                            <label>perfect aerocraft (Leaving)</label>
                            <thingClass>MYDE_AerocraftFramework.Skyfaller_Aerocraft_Leaving</thingClass>
                            <altitudeLayer>Skyfaller</altitudeLayer>
                            <skyfaller>
                                <movementType>Decelerate</movementType>
                                <reversed>true</reversed>
                                <shadow>Things/Skyfaller/SkyfallerShadowDropPod</shadow>
                                <shadowSize>(2,2)</shadowSize>
                                <anticipationSound>DropPod_Leaving</anticipationSound>
                                <anticipationSoundTicks>-10</anticipationSoundTicks>
                                <ticksToImpactRange>
                                    <min>-40</min>
                                    <max>-15</max>
                                </ticksToImpactRange>
                            </skyfaller>
                            <graphicData>
                                <texPath>AerocraftFramework/pgiaerobase</texPath>
                                <graphicClass>Graphic_Single</graphicClass>
                                <shaderType>CutoutFlying</shaderType>
                                <drawSize>1</drawSize>
                            </graphicData>
                        </ThingDef>

                        <WorldObjectDef>
                            <defName>PGI_Aerocraft_WorldObject</defName>
                            <label>perfect aerocraft</label>
                            <description>perfect aerocraft traveling through the rimworld</description>
                            <worldObjectClass>MYDE_AerocraftFramework.WorldObject_CrossMapThing_Flying</worldObjectClass>
                            <texture>AerocraftFramework/pgiaerobase</texture>
                            <expandingIconTexture>AerocraftFramework/pgiaerobase</expandingIconTexture>
                            <useDynamicDrawer>true</useDynamicDrawer>
                            <expandingIcon>true</expandingIcon>
                            <expandingIconPriority>60</expandingIconPriority>
                            <rotateGraphicWhenTraveling>true</rotateGraphicWhenTraveling>
                            <expandMore>true</expandMore>
                            <allowCaravanIncidentsWhichGenerateMap>true</allowCaravanIncidentsWhichGenerateMap>
                        </WorldObjectDef>
                    </value>
				</li>

            </operations>
	    </match>
    </Operation>
    
</Patch>