<?xml version="1.0" encoding="utf-8" ?>
<Patch>

    <Operation Class="PatchOperationFindMod">
	    <mods>
            <li>Vanilla Factions Expanded - Ancients</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- Recipes -->
				<li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
                        <RecipeDef ParentName="PGIRecipe_PerfectWorksiteBase">
                            <defName>PGI_VFEA_SuperNanites</defName>
                            <label>make super-nanites</label>
                            <products>
                                <VFEA_SuperNanites>1</VFEA_SuperNanites>
                            </products>
                        </RecipeDef>
                    </value>
				</li>
                <!-- Modifications -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="VFEA_ElectricMendingStation" or defName="VFEA_FueledMendingStation" or defName="VFEA_AncientWorkshop" or defName="VFEA_AncientBed" or defName="VFEA_AncientCryptosleepSuspender"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
                    <value>
                    	<li>PGI_PerfectEndtable</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="VFEA_AncientWorkshop"]/modExtensions/li[@Class="RecipeInheritance.ThingDefExtension"]/inheritRecipesFrom</xpath>
                    <value>
                		<li>FabricationBench</li>
            		</value>
                </li>
                <li Class="PatchOperationReplace">
            		<xpath>Defs/ThingDef[defName="VFEA_AncientHydroponicFarm"]/fertility</xpath>
            		<value>
                		<fertility>2000</fertility>
            		</value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="VFEA_AncientCookingStation"]/comps</xpath>
                    <value>
						<li Class="CompProperties_AffectedByFacilities">
        					<linkableFacilities>
                        		<li>PGI_PerfectEndtable</li>
        					</linkableFacilities>
      					</li>
                    </value>
                </li>
            </operations>
	    </match>
    </Operation>

    <Operation Class="PatchOperationFindMod">
	    <mods>
            <li>Vanilla Factions Expanded - Insectoids</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- Recipes -->
				<li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
                        <RecipeDef ParentName="PGIRecipe_PerfectWorksiteBase">
                            <defName>PGI_VFEI_Artifacts_PsychicPacifier</defName>
                            <label>make psychic pacifier</label>
                            <products>
                                <VFEI_Artifacts_PsychicPacifier>1</VFEI_Artifacts_PsychicPacifier>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_PerfectWorksiteBase">
                            <defName>PGI_VFEI_Artifacts_PsychicAnimalTamer</defName>
                            <label>make psychic animal tamer</label>
                            <products>
                                <VFEI_Artifacts_PsychicAnimalTamer>1</VFEI_Artifacts_PsychicAnimalTamer>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_PerfectWorksiteBase">
                            <defName>PGI_VFEI_Artifacts_ArchotechEraser</defName>
                            <label>make archotech eraser</label>
                            <products>
                                <VFEI_Artifacts_ArchotechEraser>1</VFEI_Artifacts_ArchotechEraser>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_PerfectWorksiteBase">
                            <defName>PGI_VFEI_Artifacts_ArchotechTeleporter</defName>
                            <label>make archotech teleporter</label>
                            <products>
                                <VFEI_Artifacts_ArchotechTeleporter>1</VFEI_Artifacts_ArchotechTeleporter>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_PerfectWorksiteBase">
                            <defName>PGI_VFEI_Apparel_ArchotechShieldBelt</defName>
                            <label>make archotech shield belt</label>
                            <products>
                                <VFEI_Apparel_ArchotechShieldBelt>1</VFEI_Apparel_ArchotechShieldBelt>
                            </products>
                        </RecipeDef>

                        <RecipeDef ParentName="PGIRecipe_ConverterWorksiteBase">
                            <defName>PGI_VFEI_Shell_PsychicWarhead</defName>
                            <label>make insanity warhead</label>
                            <products>
                                <VFEI_Shell_PsychicWarhead>25</VFEI_Shell_PsychicWarhead>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_ConverterWorksiteBase">
                            <defName>PGI_VFEI_Genomes</defName>
                            <label>make genetic material</label>
                            <products>
            		    	    <VFEI_DroneGenome>75</VFEI_DroneGenome>
                                <VFEI_WarriorGenome>75</VFEI_WarriorGenome>
                                <VFEI_RoyalGenome>75</VFEI_RoyalGenome>
                            </products>
                        </RecipeDef>
                    </value>
				</li>
            </operations>
	    </match>
    </Operation>

    <Operation Class="PatchOperationFindMod">
		<mods>
			<li>Vanilla Factions Expanded - Medieval</li>
		</mods>
		<match Class="PatchOperationSequence">
            <!-- Addons -->
			<operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ItemProcessor.ItemAcceptedDef[defName="PGI_PerfectCooker_BillAccept"]/items</xpath>
                    <value>
				        <li>VFEM_Must</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
                        <ItemProcessor.CombinationDef ParentName="PGI_ItemProcess_UseQualityBase">
		                    <defName>PGI_PerfectCookerBill_Honey</defName>
		                    <items>
		                    	<li>VFEM_Must</li>
		                    </items>
		                    <amount>
		                    	<li>5</li>
		                    </amount>
		                    <result>VFEM_Wine</result>
		                    <yield>25</yield>
	                    </ItemProcessor.CombinationDef>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>

    <Operation Class="PatchOperationFindMod">
		<mods>
			<li>Vanilla Factions Expanded - Settlers</li>
		</mods>
		<match Class="PatchOperationSequence">
            <!-- Addons -->
			<operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ItemProcessor.ItemAcceptedDef[defName="PGI_PerfectCooker_BillAccept"]/items</xpath>
                    <value>
				        <li>Chemfuel</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
                        <ItemProcessor.CombinationDef ParentName="PGI_ItemProcess_UseQualityBase">
		                    <defName>PGI_PerfectCookerBill_Chemfuel</defName>
		                    <items>
		                    	<li>Chemfuel</li>
		                    </items>
		                    <amount>
		                    	<li>25</li>
		                    </amount>
		                    <result>Chemshine</result>
		                    <yield>25</yield>
	                    </ItemProcessor.CombinationDef>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>

    <Operation Class="PatchOperationFindMod">
		<mods>
			<li>Vanilla Factions Expanded - Vikings</li>
		</mods>
		<match Class="PatchOperationSequence">
            <!-- Addons -->
			<operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ItemProcessor.ItemAcceptedDef[defName="PGI_PerfectCooker_BillAccept"]/items</xpath>
                    <value>
				        <li>VFEV_Honey</li>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
                        <ItemProcessor.CombinationDef ParentName="PGI_ItemProcess_NoQualityBase">
		                    <defName>PGI_PerfectCookerBill_Honey</defName>
		                    <items>
		                    	<li>VFEV_Honey</li>
		                    </items>
		                    <amount>
		                    	<li>25</li>
		                    </amount>
		                    <result>VFEV_Mead</result>
		                    <yield>25</yield>
	                    </ItemProcessor.CombinationDef>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>

    <Operation Class="PatchOperationFindMod">
	    <mods>
            <li>Vanilla Fishing Expanded</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
				<li Class="PatchOperationAdd">
					<xpath>Defs/VCE_Fishing.FishableTerrainDef[defName="VCEF_VanillaFishableTerrainsOcean"]/allowedTerrains</xpath>
					<value>
						<li>PGI_PerfectWaterzone</li>
					</value>
				</li>
            </operations>
	    </match>
    </Operation>

    <Operation Class="PatchOperationFindMod">
	    <mods>
            <li>Vanilla Furniture Expanded - Architect</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationAddModExtension">
                    <xpath>Defs/ThingDef[@Name="PGI_PStructureBase"]</xpath>
                    <value>
                        <li Class="VFEArchitect.ThingExtension_IgnoreStuffFor">
							<stats>
								<li>DoorOpenSpeed</li>
							</stats>
						</li>
                    </value>
                </li>
            </operations>
	    </match>
    </Operation>

    <Operation Class="PatchOperationFindMod">
	    <mods>
            <li>Vanilla Furniture Expanded - Security</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- Addons -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="PGI_PerfectMortar"]/comps</xpath>
                    <value>
                        <li Class="VFESecurity.CompProperties_LongRangeArtillery">
                            <worldTileRange>2000</worldTileRange>
                            <maxForcedMissRadiusFactor>2.5</maxForcedMissRadiusFactor>
                            <gizmoIconTexPath>Building/Turret/perfectmortartop</gizmoIconTexPath>
                        </li>
                    </value>
                </li>
            </operations>
	    </match>
    </Operation>
    
    <Operation Class="PatchOperationFindMod">
	    <mods>
            <li>Vanilla Races Expanded - Archon</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
                        <RecipeDef ParentName="PGIRecipe_ArmoryWorksiteBase">
                            <defName>PGIMake_VREA_MeleeWeapon_ArchobladeBladelink</defName>
                            <label>forge archoblade</label>
                            <products>
                                <VREA_MeleeWeapon_ArchobladeBladelink>1</VREA_MeleeWeapon_ArchobladeBladelink>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_ArmoryWorksiteBase">
                            <defName>PGIMake_VREA_Apparel_Archoplate</defName>
                            <label>forge archoplate</label>
                            <products>
                                <VREA_Apparel_Archoplate>1</VREA_Apparel_Archoplate>
                            </products>
                        </RecipeDef>
                    </value>
                </li>
            </operations>
	    </match>
    </Operation>
    
</Patch>