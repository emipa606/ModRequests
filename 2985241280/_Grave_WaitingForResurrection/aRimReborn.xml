<?xml version="1.0" encoding="utf-8" ?>
<Patch>
    <Operation Class="PatchOperationFindMod">
	    <mods>
            <li>A Rim Reborn - Core</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- Buildings -->
				<li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
						<ThingDef ParentName="PGI_PSpotBase">
    					    <defName>PGI_ARR_PAetherWorksite</defName>
    					    <label>perfect aether manipulator</label>
    					    <graphicData>
    					        <texPath>Building/Worksite/perfectaethersite</texPath>
    					    </graphicData>
							<recipes>
								<li>ARR_CraftAnimaPendant</li>
								<li>ARR_CraftAnimaPendantInfused</li>
							</recipes>
    					</ThingDef>
						<ThingDef ParentName="PGI_PFurnitureBase">
							<defName>PGI_ARR_PAetherLink</defName>
							<label>perfect aether linker</label>
							<description>An aetheric link tower with larger range and green color.</description>
							<altitudeLayer>BuildingOnTop</altitudeLayer>
							<clearBuildingArea>false</clearBuildingArea>
							<graphicData>
								<texPath>Building/Various/pgiaetherlink</texPath>
								<graphicClass>Graphic_Single</graphicClass>
								<drawSize>(1,1)</drawSize>
							</graphicData>
							<size>(1,1)</size>
    						<placeWorkers>
    						  	<li>ARimReborn.PlaceWorker_ShowAethericLinks</li>
    						</placeWorkers>
    					    <comps>
      							<li Class="ARimReborn.CompProperties_AetherLink">
      							  	<linkRadius>55</linkRadius>
      							  	<canBeToggled>true</canBeToggled>
      							  	<defaultToggleState>true</defaultToggleState>
      							</li>
      							<li Class="ARimReborn.CompProperties_AetherGlower">
      							  	<glowRadius>12</glowRadius>
      							  	<glowColor>(36,120,36,0)</glowColor>
      							  	<conditionalOnActiveLink>true</conditionalOnActiveLink>
      							</li>
      							<li Class="ARimReborn.CompProperties_AetherAccumulator">
      							  	<baseGenerationRate>6000000000</baseGenerationRate>
      							  	<canTransmitToNetwork>true</canTransmitToNetwork>
      							  	<canToggleTransmission>true</canToggleTransmission>
      							</li>
      							<li Class="ARimReborn.CompProperties_AetherCapacitor">
      							    <aetherCapacity>6000000000</aetherCapacity>
      							    <canBeTransmitted>true</canBeTransmitted>
      							    <canAcceptTransmitted>true</canAcceptTransmitted>
      							    <canBeEmptied>false</canBeEmptied>
      							    <disableInteractionIfLinkAvailableOnSpawn>true</disableInteractionIfLinkAvailableOnSpawn>
      							    <fuelThingDefs>
        							  	<li>ARR_EarthCrystal</li>
        							  	<li>ARR_FireCrystal</li>
        							  	<li>ARR_IceCrystal</li>
        							  	<li>ARR_LightningCrystal</li>
        							  	<li>ARR_WaterCrystal</li>
        							  	<li>ARR_WindCrystal</li>
        							  	<li>ARR_CrystalSand</li>
        							</fuelThingDefs>
      							</li>
								<li Class="ARimReborn.CompProperties_TeleportBeacon">
									<allowAttunement>true</allowAttunement>
								</li>
    					    </comps>
						</ThingDef>
                    </value>
				</li>
                <!-- Recipes -->
				<li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
						<RecipeDef Abstract="True" ParentName="PGI_PRecipeBase" Name="PGIRecipe_ARRBase">
    					    <recipeUsers>
						        <li>PGI_ARR_PAetherWorksite</li>
						    </recipeUsers>
    					</RecipeDef>
    					<RecipeDef Abstract="True" ParentName="PGI_PRecipeCostBase" Name="PGIRecipe_ARRCostBase">
    					    <recipeUsers>
						        <li>PGI_ARR_PAetherWorksite</li>
						    </recipeUsers>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRBase">
    					    <defName>PGI_Aether_ARR_EarthCrystal</defName>
    					    <label>make earth crystal</label>
    					    <products>
    					        <ARR_EarthCrystal>1000</ARR_EarthCrystal>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRBase">
    					    <defName>PGI_Aether_ARR_FireCrystal</defName>
    					    <label>make fire crystal</label>
    					    <products>
    					        <ARR_FireCrystal>1000</ARR_FireCrystal>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRBase">
    					    <defName>PGI_Aether_ARR_IceCrystal</defName>
    					    <label>make ice crystal</label>
    					    <products>
    					        <ARR_IceCrystal>1000</ARR_IceCrystal>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRBase">
    					    <defName>PGI_Aether_ARR_LightningCrystal</defName>
    					    <label>make lightning crystal</label>
    					    <products>
    					        <ARR_LightningCrystal>1000</ARR_LightningCrystal>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRBase">
    					    <defName>PGI_Aether_ARR_WaterCrystal</defName>
    					    <label>make water crystal</label>
    					    <products>
    					        <ARR_WaterCrystal>1000</ARR_WaterCrystal>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRBase">
    					    <defName>PGI_Aether_ARR_WindCrystal</defName>
    					    <label>make wind crystal</label>
    					    <products>
    					        <ARR_WindCrystal>1000</ARR_WindCrystal>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRBase">
    					    <defName>PGI_Aether_ARR_CrystalSand</defName>
    					    <label>make crystal sand</label>
    					    <products>
    					        <ARR_CrystalSand>1000</ARR_CrystalSand>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_MealTravel</defName>
    					    <label>make travel rations</label>
    					    <products>
    					        <ARR_MealTravel>10</ARR_MealTravel>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_MedicineAlchemical</defName>
    					    <label>make alchemical medicine</label>
    					    <products>
    					        <ARR_MedicineAlchemical>25</ARR_MedicineAlchemical>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_Potion</defName>
    					    <label>make potion</label>
    					    <products>
    					        <ARR_Potion>25</ARR_Potion>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_PotionHi</defName>
    					    <label>make hi-potion</label>
    					    <products>
    					        <ARR_PotionHi>25</ARR_PotionHi>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_PotionAntidote</defName>
    					    <label>make antidote</label>
    					    <products>
    					        <ARR_PotionAntidote>25</ARR_PotionAntidote>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_PotionVitality</defName>
    					    <label>make potion of vitality</label>
    					    <products>
    					        <ARR_PotionVitality>25</ARR_PotionVitality>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_PotionStrength</defName>
    					    <label>make potion of strength</label>
    					    <products>
    					        <ARR_PotionStrength>25</ARR_PotionStrength>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_PotionDexterity</defName>
    					    <label>make potion of dexterity</label>
    					    <products>
    					        <ARR_PotionDexterity>25</ARR_PotionDexterity>
    					    </products>
    					</RecipeDef>
                    </value>
				</li>
				<!-- Buffers -->
				<li Class="PatchOperationAdd">
					<xpath>Defs</xpath>
					<value>
    					<ThingDef ParentName="PGI_PHediffGiverGoodBase">
    					    <defName>PGI_Buffer_ARR_Aether</defName>
    					    <label>perfect aether pusher</label>
    					    <description>a facility that pushes aether flow through you.</description>
						    <comps>
						    	<li Class="VFECore.CompProperties_HediffGiver">
    					            <hediffDef>ARR_Aether</hediffDef>
						    		<radius>14.9</radius>
						    		<severityIncrease>1</severityIncrease>
    					            <tickRate>60</tickRate>
						    	</li>
						    </comps>
    					</ThingDef>
					</value>
				</li>
                <!-- Addons -->
				<li Class="PatchOperationAdd">
					<xpath>Defs/WorkGiverDef[defName="PGI_MainWork"]/fixedBillGiverDefs</xpath>
					<value>
						<li>PGI_ARR_PAetherWorksite</li>
					</value>
				</li>
				<li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[@Name="PGI_PApparelBase"]/equippedStatOffsets</xpath>
                    <value>
                        <ARR_StunResistance>114514</ARR_StunResistance>
						<ARR_AetherialManipulation>114514</ARR_AetherialManipulation>
                    </value>
				</li>
                <!-- Modifications -->
				<li Class="PatchOperationAdd">
					<xpath>Defs/ThingDef[defName="ARR_AetherCraftTable" or defName="ARR_AetherCraftTableLinked" or defName="ARR_AetherTailorTable" or defName="ARR_AetherTailorTableLinked" or defName="ARR_GlamourTable" or defName="ARR_AetherMachineTable"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
					<value>
						<li>PGI_PerfectEndtable</li>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>Defs/ThingDef[defName="ARR_AetherPrepTable" or defName="ARR_AetherPrepTableLinked"]</xpath>
					<value>
						<comps>
                        	<li Class="CompProperties_AffectedByFacilities">
                        	    <linkableFacilities>
                        	        <li>PGI_PerfectEndtable</li>
                        	    </linkableFacilities>
                        	</li>
						</comps>
					</value>
				</li>
            </operations>
	    </match>
    </Operation>

	<Operation Class="PatchOperationFindMod">
	    <mods>
            <li>A Rim Reborn - Classes and Jobs</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- Recipes -->
				<li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_PotionEther</defName>
    					    <label>make ether</label>
    					    <products>
    					        <ARR_PotionEther>25</ARR_PotionEther>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_SoulCrystal_WhiteMage</defName>
    					    <label>make soul of the white mage</label>
    					    <products>
    					        <ARR_SoulCrystal_WhiteMage>1</ARR_SoulCrystal_WhiteMage>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_SoulCrystal_BlackMage</defName>
    					    <label>make soul of the black mage</label>
    					    <products>
    					        <ARR_SoulCrystal_BlackMage>1</ARR_SoulCrystal_BlackMage>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_SoulCrystal_Warrior</defName>
    					    <label>make soul of the warrior</label>
    					    <products>
    					        <ARR_SoulCrystal_Warrior>1</ARR_SoulCrystal_Warrior>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_SoulCrystal_Dragoon</defName>
    					    <label>make soul of the dragoon</label>
    					    <products>
    					        <ARR_SoulCrystal_Dragoon>1</ARR_SoulCrystal_Dragoon>
    					    </products>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_ARRCostBase">
    					    <defName>PGI_Aether_ARR_SoulCrystal_Bard</defName>
    					    <label>make soul of the bard</label>
    					    <products>
    					        <ARR_SoulCrystal_Bard>1</ARR_SoulCrystal_Bard>
    					    </products>
    					</RecipeDef>
                    </value>
				</li>
                <!-- Addons -->
				<li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[@Name="PGI_PApparelBase"]/equippedStatOffsets</xpath>
                    <value>
                        <ARR_MagicPointMax>9999999</ARR_MagicPointMax>
						<ARR_MagicPointRegen>9999999</ARR_MagicPointRegen>
                    </value>
				</li>
            </operations>
	    </match>
    </Operation>

</Patch>