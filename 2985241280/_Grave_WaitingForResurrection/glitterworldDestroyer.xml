<?xml version="1.0" encoding="utf-8" ?>
<Patch>

    <Operation Class="PatchOperationFindMod">
	    <mods>
            <li>Hyacinth's Mechanoid Addon - GD MK3</li>
	    </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- Recipes -->
				<li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
                        <RecipeDef ParentName="PGIRecipe_BiotechWorksiteBase">
                            <defName>Make_PGI_GD_BlackNanoChip</defName>
        					<label>make semi-psychic chip</label>
                            <products>
        					    <BlackNanoChip>10</BlackNanoChip>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_BiotechWorksiteBase">
                            <defName>Make_PGI_GD_BlackPersonaData</defName>
        					<label>make persona data</label>
                            <products>
        					    <BlackPersonaData>20</BlackPersonaData>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_BiotechWorksiteBase">
                            <defName>Make_PGI_GD_MechHelpCaller</defName>
        					<label>make mechanoid pager</label>
                            <products>
        					    <MechHelpCaller>5</MechHelpCaller>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_ConverterWorksiteBase">
                            <defName>Make_PGI_GD_PrecisionDeck</defName>
        					<label>make precision deck</label>
                            <products>
        					    <PrecisionDeck>60</PrecisionDeck>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_ConverterWorksiteBase">
                            <defName>Make_PGI_GD_UniversalTrainer</defName>
                            <label>make universal trainer</label>
                            <products>
                                <UniversalTrainer>5</UniversalTrainer>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_ConverterWorksiteBase">
                            <defName>Make_PGI_GD_Shell_Antimatter</defName>
                            <label>make antimatter shell</label>
                            <products>
                                <Shell_Antimatter>1</Shell_Antimatter>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_ConverterWorksiteBase">
                            <defName>Make_PGI_GD_Shell_Frost</defName>
                            <label>make frost shell</label>
                            <products>
                                <Shell_Frost>1</Shell_Frost>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_PerfectWorksiteBase">
                            <defName>Make_PGI_GD_BlackMedalWar</defName>
                            <label>make iron medal</label>
                            <products>
                                <BlackMedal_War>1</BlackMedal_War>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_PerfectWorksiteBase">
                            <defName>Make_PGI_GD_BlackMedalFamine</defName>
                            <label>make tungsten medal</label>
                            <products>
                                <BlackMedal_Famine>1</BlackMedal_Famine>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_PerfectWorksiteBase">
                            <defName>Make_PGI_GD_BlackMedalPlague</defName>
                            <label>make onyx medal</label>
                            <products>
                                <BlackMedal_Plague>1</BlackMedal_Plague>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_PerfectWorksiteBase">
                            <defName>Make_PGI_GD_BlackMedalDeath</defName>
                            <label>make bronze medal</label>
                            <products>
                                <BlackMedal_Death>1</BlackMedal_Death>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_PerfectWorksiteBase">
                            <defName>Make_PGI_GD_BlackMedalPale</defName>
                            <label>make pale medal</label>
                            <products>
                                <BlackMedal_Conquer>1</BlackMedal_Conquer>
                            </products>
                        </RecipeDef>
                        <RecipeDef ParentName="PGIRecipe_PerfectWorksiteBase">
                            <defName>Make_PGI_GD_BlackMechanitorSet</defName>
                            <label>make rangers' set</label>
                            <products>
                                <Apparel_GD_BlackHat>1</Apparel_GD_BlackHat>
                                <Apparel_GD_BlackWindbreaker>1</Apparel_GD_BlackWindbreaker>
                            </products>
                        </RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_PerfectMechGestatorBase">
        					<defName>PGI_PMech_Mech_Firefly</defName>
        					<label>gestate firefly</label>
        					<products>
        					    <Mech_Firefly>1</Mech_Firefly>
        					</products>
        					<descriptionHyperlinks>
        					    <ThingDef>Mech_Firefly</ThingDef>
        					</descriptionHyperlinks>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_PerfectMechGestatorBase">
        					<defName>PGI_PMech_Mech_ReconScyther</defName>
        					<label>gestate recon scyther</label>
        					<products>
        					    <Mech_ReconScyther>1</Mech_ReconScyther>
        					</products>
        					<descriptionHyperlinks>
        					    <ThingDef>Mech_ReconScyther</ThingDef>
        					</descriptionHyperlinks>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_PerfectMechGestatorBase">
        					<defName>PGI_PMech_Mech_MarineLancer</defName>
        					<label>gestate marine lancer</label>
        					<products>
        					    <Mech_MarineLancer>1</Mech_MarineLancer>
        					</products>
        					<descriptionHyperlinks>
        					    <ThingDef>Mech_MarineLancer</ThingDef>
        					</descriptionHyperlinks>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_PerfectMechGestatorBase">
        					<defName>PGI_PMech_Mech_CataphractCentipede</defName>
        					<label>gestate cataphract centipede</label>
        					<products>
        					    <Mech_CataphractCentipede>1</Mech_CataphractCentipede>
        					</products>
        					<descriptionHyperlinks>
        					    <ThingDef>Mech_CataphractCentipede</ThingDef>
        					</descriptionHyperlinks>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_PerfectMechGestatorBase">
        					<defName>PGI_PMech_Mech_BlackScyther</defName>
        					<label>gestate scyther in black</label>
                            <description>Gestate a scyther in black. He's really a cool guy.</description>
        					<products>
        					    <Mech_BlackScyther>1</Mech_BlackScyther>
        					</products>
        					<descriptionHyperlinks>
        					    <ThingDef>Mech_BlackScyther</ThingDef>
        					</descriptionHyperlinks>
    					</RecipeDef>
    					<RecipeDef ParentName="PGIRecipe_PerfectMechGestatorBase">
        					<defName>PGI_PMech_Mech_BlackLancer</defName>
        					<label>gestate lancer in black</label>
                            <description>Gestate a lancer in black. He's really a cool guy.</description>
        					<products>
        					    <Mech_BlackLancer>1</Mech_BlackLancer>
        					</products>
        					<descriptionHyperlinks>
        					    <ThingDef>Mech_BlackLancer</ThingDef>
        					</descriptionHyperlinks>
    					</RecipeDef>
    					<!-- This guy's insanely hard to handle so I decide to hide him. 
                        <RecipeDef ParentName="PGIRecipe_PerfectMechGestatorBase">
        					<defName>PGI_PMech_Mech_BlackApocriton</defName>
        					<label>gestate apocriton in black</label>
        					<products>
        					    <Mech_BlackApocriton>1</Mech_BlackApocriton>
        					</products>
        					<descriptionHyperlinks>
        					    <ThingDef>Mech_BlackApocriton</ThingDef>
        					</descriptionHyperlinks>
    					</RecipeDef>-->
                    </value>
				</li>
				<!-- Hediffs -->
				<li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
						<HediffDef>
    						<defName>PGI_GD_VirusInvasion</defName>
    						<label>virus invasion</label>
							<hediffClass>Hediff_High</hediffClass>
    						<description>The sheer size of the unit blocks signal transmission, and the persona core takes a while to turn on. This unit is extremely vulnerable during initialization.</description>
    						<initialSeverity>0.01</initialSeverity>
							<maxSeverity>99</maxSeverity>
							<defaultLabelColor>(0.52, 0.44, 1.0)</defaultLabelColor>
							<alwaysAllowMothball>true</alwaysAllowMothball>
							<alwaysAllowMothballCached>true</alwaysAllowMothballCached>
							<comps>
    						    <li Class="HediffCompProperties_SeverityPerDay">
    						        <severityPerDay>-2</severityPerDay>
    						    </li>
    						</comps>
    						<stages>
    						  	<li>
									<statFactors>
    						  	      	<AimingDelayFactor>30</AimingDelayFactor>
    						  	      	<IncomingDamageFactor>7.5</IncomingDamageFactor>
    						  	  	</statFactors>
									<capMods>
    						  	      	<li>
    						  	          	<capacity>Consciousness</capacity>
    						  	          	<postFactor>0.4</postFactor>
    						  	          	<setMax>0.4</setMax>
    						  	      	</li>
    						  	      	<li>
    						  	          	<capacity>Moving</capacity>
    						  	          	<postFactor>0.4</postFactor>
    						  	          	<setMax>0.4</setMax>
    						  	      	</li>
    						  	  </capMods>
    						  	</li>
    						</stages>
  						</HediffDef>
                    </value>
				</li>

                <!-- Buffers -->
				<li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
						<ThingDef ParentName="PGI_PHediffGiverBadBase">
    					    <defName>PGI_Buffer_GD_VirusInvasion</defName>
    					    <label>perfect virus invador</label>
    					    <description>a facility weakens nearby pawns with a special digital virus.</description>
						    <comps>
						    	<li Class="VFECore.CompProperties_HediffGiver">
    					            <hediffDef>PGI_GD_VirusInvasion</hediffDef>
						    		<radius>14.9</radius>
						    		<severityIncrease>11</severityIncrease>
    					            <tickRate>60</tickRate>
						    	</li>
						    </comps>
    					</ThingDef>
						<ThingDef ParentName="PGI_PHediffGiverBadBase">
    					    <defName>PGI_Buffer_GD_Reinforce_Scrap</defName>
    					    <label>an useless buffer</label>
    					    <description>a facility that makes a pawn a piece of garbage.</description>
						    <comps>
						    	<li Class="VFECore.CompProperties_HediffGiver">
    					            <hediffDef>Reinforce_Scrap</hediffDef>
						    		<radius>14.9</radius>
						    		<severityIncrease>0.4</severityIncrease>
    					            <tickRate>60</tickRate>
						    	</li>
						    </comps>
    					</ThingDef>
					</value>
				</li>
				<!-- Patches -->
                <li Class="PatchOperationFindMod">
        	    	<mods>
          	    		<li>Vanilla Nutrient Paste Expanded</li>
        	    	</mods>
        	    	<match Class="PatchOperationSequence">
          	    		<operations>
                            <!-- Modifications -->
                			<li Class="PatchOperationAdd">
                	  			<xpath>Defs/ThingDef[@Name="GDWallBase"]/comps</xpath>
                	  			<value>
                		    		<li Class="PipeSystem.CompProperties_Resource">
        			        	    	<pipeNet>VNPE_NutrientPasteNet</pipeNet>
      			            		</li>
              			    	</value>
            		    	</li>
          		    	</operations>
        	    	</match>
      	    	</li>
                <!-- Modifications -->
				<li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="Mech_BlackScyther" or defName="Mech_BlackLancer" or defName="Mech_BlackApocriton"]/statBases/BandwidthCost</xpath>
                    <value>
                        <BandwidthCost>1</BandwidthCost>
                    </value>
				</li>
				<li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="Mech_BlackScyther" or defName="Mech_BlackLancer"]/statBases</xpath>
                    <value>
                        <ControlTakingTime MayRequire="Ludeon.Rimworld.Biotech">1</ControlTakingTime>
                    </value>
				</li>
				<li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="Mech_BlackApocriton"]/statBases/ControlTakingTime</xpath>
                    <value>
                        <ControlTakingTime>1</ControlTakingTime>
                    </value>
				</li>
				<li Class="PatchOperationRemove">
                    <xpath>Defs/ThingDef[defName="Mech_BlackScyther"]/comps</xpath>
                </li>
            </operations>
	    </match>
    </Operation>
    
</Patch>