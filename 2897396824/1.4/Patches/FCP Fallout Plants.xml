<?xml version="1.0" encoding="utf-8" ?>
<Patch>

    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>FCP Fallout Plants</li>
        </mods>
		<match Class="PatchOperationSequence">
			<operations>

			<!-- Pickle Fruit Recipe -->
				<li Class="PatchOperationAdd">
					<xpath>/Defs/RecipeDef[defName="GAB_PickleFruit"]/defaultIngredientFilter/thingDefs</xpath>
					<value>
						<li>FCP_RawMutfruit</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<xpath>/Defs/RecipeDef[defName="GAB_PickleFruit"]/fixedIngredientFilter/thingDefs</xpath>
					<value>
						<li>FCP_RawMutfruit</li>
					</value>
				</li>
				
				<li Class="PatchOperationAdd">
					<xpath>/Defs/RecipeDef[defName="GAB_PickleFruit"]/ingredients/li[1]/filter/thingDefs</xpath>
					<value>
						<li>FCP_RawMutfruit</li>
					</value>
				</li>

			<!-- Pickle Produce Recipe -->
				<li Class="PatchOperationAdd">
					<xpath>/Defs/RecipeDef[defName="GAB_PickleProduce"]/fixedIngredientFilter/disallowedThingDefs</xpath>
					<value>
						<li>FCP_RawMutfruit</li>
					</value>
				</li>

				<li Class="PatchOperationAdd">
					<xpath>/Defs/RecipeDef[defName="GAB_PickleProduce"]/defaultIngredientFilter/disallowedThingDefs</xpath>
					<value>
						<li>FCP_RawMutfruit</li>
					</value>
				</li>

            </operations>
		</match>
    </Operation>


    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>FCP Fallout Plants</li>
        </mods>
		<match Class="PatchOperationFindMod">
		<mods>
		<li>Vanilla Cooking Expanded</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>

				<!-- Undo Fallout VCE patches -->
		       	<li Class="PatchOperationReplace">
			    	<xpath>/Defs/ThingDef[defName="FCP_Plant_Razorgrain"]/plant/harvestedThingDef</xpath>
			   	    <value>
                 	    <harvestedThingDef>FCP_RawRazorgrain</harvestedThingDef>
                	 </value>
               	</li>

		        <li Class="PatchOperationReplace">
			      	<xpath>/Defs/ThingDef[defName="FCP_Plant_Razorgrain"]/plant/harvestYield</xpath>
			     	<value>
                   	    <harvestYield>18</harvestYield>
                  	</value>
                </li>

				<!-- Add Razorgrain to GrainToFlour and GrainToFlourBulk recipe ingredients -->
				<li Class="PatchOperationAdd"> 
					<xpath>/Defs/RecipeDef[defName="GAB_MakeFlour" or defName="GAB_MakeFlourBulk"]/ingredients/li/filter/thingDefs</xpath>
					<value>
						<li>FCP_RawRazorgrain</li>
					</value>
				</li>
				<li Class="PatchOperationAdd"> 
					<xpath>/Defs/RecipeDef[defName="GAB_MakeFlour" or defName="GAB_MakeFlourBulk"]/fixedIngredientFilter/thingDefs</xpath>
					<value>
						<li>FCP_RawRazorgrain</li>
					</value>
				</li>

            </operations>
		</match>
		</match>
    </Operation>

</Patch>