<?xml version="1.0" encoding="utf-8" ?>
<Patch>
  <Operation Class="PatchOperationSequence">
	<operations>
	  <li Class="PatchOperationFindMod">
			
		<mods><li>Combat Extended</li></mods>
			
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationAttributeSet">
				<xpath>Defs/ThingDef[defName="MULE_Porter_Prod"]</xpath>
				<attribute>Class</attribute>
				<value>CombatExtended.AmmoDef</value>
			</li>
			
			<li Class="PatchOperationAttributeSet">
				<xpath>Defs/ThingDef[defName="MULE_Porter_Prod"]</xpath>
				<attribute>ParentName</attribute>
				<value>BaseProjectileNeolithic</value>
			</li>
			
			<li Class="PatchOperationAttributeSet">
				<xpath>Defs/ThingDef[defName="DS_Porter_Prod"]</xpath>
				<attribute>Class</attribute>
				<value>CombatExtended.AmmoDef</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="MULE_Porter_Prod"]/projectile</xpath>
				<value>
					<projectile Class="CombatExtended.ProjectilePropertiesCE">
					  <damageDef>MuleShockprod</damageDef>
					  <damageAmountBase>5</damageAmountBase>
					  <speed>8</speed>
					  <preExplosionSpawnChance>0.5</preExplosionSpawnChance>
					  <preExplosionSpawnThingDef>DS_Porter_Prod</preExplosionSpawnThingDef>
					</projectile>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="DS_Porter_Prod"]/verbs</xpath>
				<value>
					<verbs>
						<li Class="CombatExtended.VerbPropertiesCE">
							<verbClass>CombatExtended.Verb_ShootCEOneUse</verbClass>
							<hasStandardCommand>true</hasStandardCommand>
							<defaultProjectile>MULE_Porter_Prod</defaultProjectile>
							<warmupTime>1.5</warmupTime>
							<range>15</range>
							<soundCast>Hit_PorterProd</soundCast>
						</li>
					</verbs>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="DS_Porter_Prod"]/graphicData</xpath>
				<value>
					<graphicData>
						<texPath>Things/Item/Ammo/DS_PProd_ammo</texPath>
						<graphicClass>Graphic_StackCount</graphicClass>
						<onGroundRandomRotateAngle>0</onGroundRandomRotateAngle>
					</graphicData>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="DS_Porter_Prod"]/verbs</xpath>
				<value>
					<verbs>
						<li Class="CombatExtended.VerbPropertiesCE">
							<verbClass>CombatExtended.Verb_ShootCEOneUse</verbClass>
							<hasStandardCommand>true</hasStandardCommand>
							<defaultProjectile>MULE_Porter_Prod</defaultProjectile>
							<warmupTime>1.5</warmupTime>
							<range>15</range>
							<soundCast>Hit_PorterProd</soundCast>
						</li>
					</verbs>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="DS_Porter_Prod"]/statBases</xpath>
				<value>
					<statBases>
						<MarketValue>38.00</MarketValue>
						<SightsEfficiency>0.45</SightsEfficiency>
						<ShotSpread>0.5</ShotSpread>
						<SwayFactor>1.5</SwayFactor>
						<Bulk>3.00</Bulk>
						<Mass>1.00</Mass>
						<RangedWeapon_Cooldown>1</RangedWeapon_Cooldown>
						<MeleeCounterParryBonus>1.68</MeleeCounterParryBonus>
					</statBases>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="DS_Porter_Prod"]/tools</xpath>
				<value>
					<tools> 
						<li Class="CombatExtended.ToolCE">
							<label>shaft</label>
							<capacities>
								<li>DSMelee_PorterProdSmash</li>
							</capacities>
							<power>5</power>
							<armorPenetrationBlunt>2.25</armorPenetrationBlunt>
							<cooldownTime>1.1</cooldownTime>
						</li>
						<li Class="CombatExtended.ToolCE">
							<label>ends</label>
							<capacities>
								<li>DSMelee_ProdStun</li>
							</capacities>
							<power>10</power>
							<chanceFactor>1.5</chanceFactor>
							<armorPenetrationBlunt>0.625</armorPenetrationBlunt>
							<cooldownTime>2.3</cooldownTime>
						</li>
					</tools>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName="DS_Porter_Prod"]</xpath>
				<value>
					<equippedStatOffsets>
						<MeleeCritChance>0.17</MeleeCritChance>
						<MeleeParryChance>1.45</MeleeParryChance>
						<MeleeDodgeChance>0.9</MeleeDodgeChance>
					</equippedStatOffsets>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName="DS_Porter_Prod"]/recipeMaker</xpath>
				<value>
					<recipeUsers Inherit="False">
					</recipeUsers>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName="DS_Porter_Prod"]</xpath>
				<value>
					<stackLimit>25</stackLimit>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs</xpath>
				<value>
				  <RecipeDef ParentName="GrenadeRecipeBase">
					<defName>MakeAmmoPorterProds</defName>
					<label>make Porter Prod x10</label>
					<description>Craft 10 Porter Prods.</description>
					<jobString>Making Porter Prods.</jobString>
					<workAmount>9000</workAmount>
					<researchPrerequisite>MicroelectronicsBasics</researchPrerequisite>
					<skillRequirements>
						<Crafting>10</Crafting>
					</skillRequirements>
					<ingredients>
					  <li>
						<filter>
						  <thingDefs>
							<li>Steel</li>
						  </thingDefs>
						</filter>
						<count>150</count>
					  </li>
					  <li>
						<filter>
						  <thingDefs>
							<li>ComponentIndustrial</li>
						  </thingDefs>
						</filter>
						<count>2</count>
					  </li>
					</ingredients>
					<fixedIngredientFilter>
					  <thingDefs>
						<li>Steel</li>
						<li>ComponentIndustrial</li>
					  </thingDefs>
					</fixedIngredientFilter>
					<products>
					  <DS_Porter_Prod>10</DS_Porter_Prod>
					</products>
				  </RecipeDef>
				</value>
			</li>
			
		</operations>
		</match>	
	  </li>
	</operations>	
  </Operation>
</Patch>