<?xml version="1.0" encoding="utf-8" ?>

<Patch>

	<Operation Class="PatchOperationSequence">
		<success>Normal</success>
		<operations>

	<!-- Tooltip Updates -->		

			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkTypeDef[defName = "Doctor"]/description</xpath>
				<value>
					<description>Treat the sick. Doctors will care for both colonists and prisoners.</description>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkTypeDef[defName = "Warden"]/description</xpath>
				<value>
					<description>Manage and feed prisoners.</description>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkTypeDef[defName = "Handling"]/description</xpath>
				<value>
					<description>Train, harvest resources from and slaughter animals.</description>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkTypeDef[defName = "Cleaning"]/description</xpath>
				<value>
					<description>Clean the floor in the home area.</description>
				</value>
			</li>
			
	<!-- Nurse -->		
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "DoctorFeedHumanlikes"]/workType</xpath>
				<value>
					<workType>SMJ_Nurse</workType>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "DoctorRescue"]/workType</xpath>
				<value>
					<workType>SMJ_Nurse</workType>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "DoctorRescue"]/priorityInType</xpath>
				<value>
					<priorityInType>85</priorityInType>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "DoctorFeedAnimals"]/workType</xpath>
				<value>
					<workType>SMJ_Nurse</workType>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "VisitSickPawn"]/workType</xpath>
				<value>
					<workType>SMJ_Nurse</workType>
				</value>
			</li>

	<!-- Surgeon -->		
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "DoBillsMedicalHumanOperation"]/workType</xpath>
				<value>
					<workType>SMJ_Surgeon</workType>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "DoBillsMedicalAnimalOperation"]/workType</xpath>
				<value>
					<workType>SMJ_Surgeon</workType>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "TakeToBedToOperate"]/workType</xpath>
				<value>
					<workType>SMJ_Surgeon</workType>
				</value>
			</li>

	<!-- Refueling -->

			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "Refuel"]/workType</xpath>
				<value>
					<workType>SMJ_Refueling</workType>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "RearmTurrets"]/workType</xpath>
				<value>
					<workType>SMJ_Refueling</workType>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "TakeBeerOutOfFermentingBarrel"]/workType</xpath>
				<value>
					<workType>SMJ_Refueling</workType>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "FillFermentingBarrel"]/workType</xpath>
				<value>
					<workType>SMJ_Refueling</workType>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "UnloadCarriers"]/workType</xpath>
				<value>
					<workType>SMJ_Refueling</workType>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "HelpGatheringItemsForCaravan"]/workType</xpath>
				<value>
					<workType>SMJ_Refueling</workType>
				</value>
			</li>
			
	<!-- CleanClearSnow -->
		
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "CleanClearSnow"]/workType</xpath>
				<value>
					<workType>SMJ_ClearSnow</workType>
				</value>
			</li>

	<!-- Recruiting -->
	
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "ChatWithPrisoner"]/workType</xpath>
				<value>
					<workType>SMJ_Recruiting</workType>
				</value>
			</li>

	<!-- Tame -->
	
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "Tame"]/workType</xpath>
				<value>
					<workType>SMJ_Tame</workType>
				</value>
			</li>

	<!-- ProduceDrugs -->

			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "DoBillsProduceDrugs"]/workType</xpath>
				<value>
					<workType>SMJ_ProduceDrugs</workType>
				</value>
			</li>
			
	<!-- Cremating -->
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "Strip"]/workType</xpath>
				<value>
					<workType>SMJ_Cremating</workType>
				</value>
			</li>

			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "DoBillsCremate"]/workType</xpath>
				<value>
					<workType>SMJ_Cremating</workType>
				</value>
			</li>
	
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "DoBillsHaulCampfire"]/workType</xpath>
				<value>
					<workType>SMJ_Cremating</workType>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "HaulCorpses"]/workType</xpath>
				<value>
					<workType>SMJ_Cremating</workType>
				</value>
			</li>
			
	<!-- Merge -->

			<li Class="PatchOperationReplace">
				<xpath>/Defs/WorkGiverDef[defName = "HaulMerge"]/workType</xpath>
				<value>
					<workType>SMJ_Merge</workType>
				</value>
			</li>
			
			</operations>
	</Operation>

	<!-- Cremating Bills Update -->
	
	<Operation Class="PatchOperationReplace">
		<xpath>/Defs/RecipeDef[defName = "BurnApparel"]/requiredGiverWorkType</xpath>
		<value>
			<requiredGiverWorkType>SMJ_Cremating</requiredGiverWorkType>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationReplace">
		<xpath>/Defs/RecipeDef[defName = "BurnWeapon"]/requiredGiverWorkType</xpath>
		<value>
			<requiredGiverWorkType>SMJ_Cremating</requiredGiverWorkType>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationReplace">
		<xpath>/Defs/RecipeDef[defName = "BurnDrugs"]/requiredGiverWorkType</xpath>
		<value>
			<requiredGiverWorkType>SMJ_Cremating</requiredGiverWorkType>
		</value>
	</Operation>
	
	<!-- Ideology DLC -->
	
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Ideology</li>
		</mods>
		<match Class="PatchOperationSequence">
			<success>Normal</success>
			<operations>
				<li Class="PatchOperationReplace">
					<xpath>/Defs/WorkGiverDef[defName = "EnslavePrisoner"]/workType</xpath>
					<value>
						<workType>SMJ_Recruiting</workType>
					</value>
				</li>
			
				<li Class="PatchOperationReplace">
					<xpath>/Defs/WorkGiverDef[defName = "SuppressSlave"]/workType</xpath>
					<value>
						<workType>SMJ_Recruiting</workType>
					</value>
				</li>
			
				<li Class="PatchOperationReplace">
					<xpath>/Defs/WorkGiverDef[defName = "ConvertPrisoner"]/workType</xpath>
					<value>
						<workType>SMJ_Recruiting</workType>
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
					<xpath>/Defs/WorkGiverDef[defName = "ExtractSkull"]/workType</xpath>
					<value>
						<workType>SMJ_Cremating</workType>
					</value>
				</li>
				
				<!-- Pruning -->
				
				<li Class="PatchOperationReplace">
					<xpath>/Defs/WorkGiverDef[defName="PlantSeed"]/workType</xpath>
					<value>
						<workType>SMJ_Pruning</workType>
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
					<xpath>/Defs/WorkGiverDef[defName="PruneGauranlenTree"]/workType</xpath>
					<value>
						<workType>SMJ_Pruning</workType>
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
					<xpath>/Defs/WorkGiverDef[defName="ChangeTreeMode"]/workType</xpath>
					<value>
						<workType>SMJ_Pruning</workType>
					</value>
				</li>
				
			</operations>
		</match>
	</Operation>
	
	<!-- Biotech DLC -->
	
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Biotech</li>
		</mods>
		<match Class="PatchOperationSequence">
			<success>Normal</success>
			<operations>
				<li Class="PatchOperationSequence">
					<success>Normal</success>
						<operations>
							
							<li Class="PatchOperationAdd" MayRequire="ludeon.rimworld.biotech">
							<xpath>/Defs</xpath>
								<value>
									<WorkTypeDef>
										<defName>SMJ_Mech</defName>
										<labelShort>mech</labelShort>
										<pawnLabel>Mechanitor</pawnLabel>
										<gerundLabel>smithing</gerundLabel>
										<description>Repair mechanoids, if the colonist is a mechanitor.</description>
										<verb>Smith at</verb>
										<naturalPriority>480</naturalPriority>
										<relevantSkills>
											<li>Crafting</li>
										</relevantSkills>
										<workTags>
											<li>Crafting</li>
											<li>ManualSkilled</li>
											<li>Commoner</li>
											<li>AllWork</li>
										</workTags>
									</WorkTypeDef>
								</value>
							</li>
							
							<li Class="PatchOperationReplace" MayRequire="ludeon.rimworld.biotech">
							<xpath>/Defs/WorkGiverDef[defName="RepairMech"]/workType</xpath>
								<value>
									<workType>SMJ_Mech</workType>
								</value>
							</li>
							
							<li Class="PatchOperationReplace" MayRequire="ludeon.rimworld.biotech">
							<xpath>/Defs/WorkGiverDef[defName="DoBillsMechGestator"]/workType</xpath>
								<value>
									<workType>SMJ_Mech</workType>
								</value>
							</li>
							
							<li Class="PatchOperationReplace" MayRequire="ludeon.rimworld.biotech">
							<xpath>/Defs/WorkGiverDef[defName="DoBillsSubcoreEncoder"]/workType</xpath>
								<value>
									<workType>SMJ_Mech</workType>
								</value>
							</li>
				
							<li Class="PatchOperationInsert" MayRequire="ludeon.rimworld.biotech">
							<xpath>/Defs/ThingDef[defName = "Mech_Fabricor"]/race/mechEnabledWorkTypes/li</xpath>
								<value>
									<li>SMJ_Mech</li>
								</value>
							</li>
							
							<li Class="PatchOperationReplace">
							<xpath>/Defs/WorkGiverDef[defName = "DoBillsSubcoreEncoder"]/priorityInType</xpath>
								<value>
									<priorityInType>190</priorityInType>
								</value>
							</li>
						
						</operations>
				</li>
			
				<li Class="PatchOperationInsert">
					<xpath>/Defs/ThingDef[defName = "Mech_Cleansweeper"]/race/mechEnabledWorkTypes/li</xpath>
					<value>
						<li>SMJ_ClearSnow</li>
					</value>
				</li>
				
				<li Class="PatchOperationInsert">
					<xpath>/Defs/ThingDef[defName = "Mech_Fabricor"]/race/mechEnabledWorkTypes/li</xpath>
					<value>
						<li>SMJ_ProduceDrugs</li>
					</value>
				</li>
				
				<li Class="PatchOperationInsert">
					<xpath>/Defs/ThingDef[defName = "Mech_Lifter"]/race/mechEnabledWorkTypes/li</xpath>
					<value>
						<li>SMJ_Refueling</li>
						<li>SMJ_Cremating</li>
						<li>SMJ_Merge</li>
					</value>
				</li>
				
				<li Class="PatchOperationInsert">
					<xpath>/Defs/ThingDef[defName = "Mech_Paramedic"]/race/mechEnabledWorkTypes/li</xpath>
					<value>
						<li>SMJ_Nurse</li>
						<li>SMJ_Surgeon</li>
					</value>
				</li>
				
				<li Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[defName = "Human"]/race/lifeStageWorkSettings</xpath>
					<value>
						<SMJ_Nurse>10</SMJ_Nurse>
						<SMJ_Surgeon>10</SMJ_Surgeon>
						<SMJ_Recruiting>10</SMJ_Recruiting>
						<SMJ_Tame>7</SMJ_Tame>
						<!-- <SMJ_Train>7</SMJ_Train> -->
						<!-- <SMJ_Butcher>7</SMJ_Butcher> -->
						<!-- <SMJ_Brew>7</SMJ_Brew> -->
						<!-- <SMJ_Repair>10</SMJ_Repair> -->
						<!-- <SMJ_Deconstruct>10</SMJ_Deconstruct> -->
						<!-- <SMJ_Smooth>10</SMJ_Smooth> -->
						<!-- <SMJ_Harvesting>7</SMJ_Harvesting> -->
						<SMJ_Pruning MayRequire="Ludeon.RimWorld.Ideology">7</SMJ_Pruning>
						<SMJ_Mech>13</SMJ_Mech>
						<SMJ_ProduceDrugs>7</SMJ_ProduceDrugs>
						<SMJ_Refueling>3</SMJ_Refueling>
						<SMJ_Cremating>3</SMJ_Cremating>
						<SMJ_Merge>3</SMJ_Merge>
						<SMJ_ClearSnow>3</SMJ_ClearSnow>
					</value>
				</li>
				
			</operations>
		</match>
	</Operation>
	
</Patch>